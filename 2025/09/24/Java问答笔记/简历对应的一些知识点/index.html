
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.30.0" theme-name="Stellar" theme-version="1.30.0">
  
  <meta name="generator" content="Hexo 7.0.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>简历对应知识点 - Jakic's Blog</title>

  
    <meta name="description" content="专业技能Java基础12**Java基础** Java 基础扎实，理解 ArrayList、LinkedList、HashMap 等常见容器的实现原理，面向对象编程思想。   常见容器的实现原理这一部分详细可以转到笔记:Java集合框架学习笔记. ArrayList首先是ArrayList.ArrayList 实现了 List 接口，并且是基于数组实现的。数组的大小是固定的，一旦创建的时候指定了大">
<meta property="og:type" content="article">
<meta property="og:title" content="简历对应知识点">
<meta property="og:url" content="https://jakicdong.github.io/2025/09/24/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E7%AE%80%E5%8E%86%E5%AF%B9%E5%BA%94%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9F%A5%E8%AF%86%E7%82%B9/index.html">
<meta property="og:site_name" content="Jakic&#39;s Blog">
<meta property="og:description" content="专业技能Java基础12**Java基础** Java 基础扎实，理解 ArrayList、LinkedList、HashMap 等常见容器的实现原理，面向对象编程思想。   常见容器的实现原理这一部分详细可以转到笔记:Java集合框架学习笔记. ArrayList首先是ArrayList.ArrayList 实现了 List 接口，并且是基于数组实现的。数组的大小是固定的，一旦创建的时候指定了大">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251014135635.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251014151625.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104546.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104636.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104828.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104919.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017105303.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017110306.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017111404.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017111616.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017112027.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017112332.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143547.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143612.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143926.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017144159.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017144515.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017150442.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017152605.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153506.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153514.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153520.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153525.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017160520.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017160827.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162412.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162421.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162444.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163634.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163705.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163718.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163908.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017164145.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111511.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111625.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111844.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928112028.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928112859.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113414.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113620.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113711.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113933.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928102815.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928102840.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928104816.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142525.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142615.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142724.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142746.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928144651.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928145424.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928161322.png">
<meta property="article:published_time" content="2025-09-23T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-23T02:46:41.147Z">
<meta property="article:author" content="JakicDong">
<meta property="article:tag" content="简历">
<meta property="article:tag" content="知识点">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251014135635.png">
  
  
  
  <meta name="keywords" content="简历,知识点">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.30.0">


  
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/logo.png">
  

  

  
<!-- hexo injector head_end start --><script src="./func.js"></script><!-- hexo injector head_end end --></head>
<link rel="stylesheet" href="/css/check-in.css"><body><div class="sitebg"><div class="siteblur"></div></div>

<div class="l_body content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://avatars.githubusercontent.com/u/130200522?v=4" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Jakic's Blog</div><div class="sub normal cap">学习生活记录</div><div class="sub hover cap" style="opacity:0"> 踏上取经路,比抵达灵山更重要</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="站内搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"><a class="nav-item active" title="博客首页" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="打卡墙" href="/check-in" style="color:#1976D2"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a><a class="nav-item" title="github" target="_blank" rel="noopener" href="https://github.com/JakicDong/" style="color:#1BCDFC"><svg height="32" aria-hidden="true" viewBox="0 0 24 24" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle"> <path fill="#cccccc" d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path> </svg></a><a class="nav-item" title="力扣" target="_blank" rel="noopener" href="https://leetcode.cn/u/dong7/" style="color:#3DC550"><svg width="59" height="22" viewBox="0 0 59 22" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto max-w-none"> <path fill-rule="evenodd" clip-rule="evenodd" d="M27.8226 17.4752C28.3202 16.1443 28.7218 14.5458 28.9859 12.6607C29.1277 11.6491 29.2845 10.1658 29.4568 8.20813H35.2561C35.2637 8.20813 35.2713 8.20828 35.2789 8.20857C35.6071 8.22119 35.8628 8.49743 35.8502 8.82558L35.4996 17.9427C35.4873 18.262 35.2249 18.5144 34.9054 18.5144H33.2974C32.8595 18.5144 32.5046 18.8694 32.5046 19.3072C32.5046 19.7451 32.8595 20.1 33.2974 20.1H35.4776C36.3533 20.1 37.0631 19.3901 37.0631 18.5144L37.4595 8.20813C37.4595 7.33244 36.7497 6.62254 35.874 6.62254H29.5913C29.671 5.65054 29.7537 4.58575 29.8394 3.42794C29.8718 2.99129 29.544 2.61109 29.1074 2.57874C28.6707 2.54639 28.2905 2.87414 28.2582 3.3108C28.1689 4.51669 28.0829 5.62069 28.0004 6.62254H25.3695C24.9316 6.62254 24.5767 6.97749 24.5767 7.41534C24.5767 7.85318 24.9316 8.20813 25.3695 8.20813H27.8651C27.7 10.07 27.5501 11.4816 27.4157 12.4407C27.1674 14.2124 26.7941 15.6986 26.3374 16.9199C26.0981 17.5599 25.8527 18.0822 25.6163 18.4944C25.5366 18.6333 25.4649 18.7474 25.4029 18.8378C25.3703 18.8853 25.3512 18.9109 25.3475 18.9155C25.0722 19.256 25.1252 19.7552 25.4657 20.0305C25.8062 20.3057 26.3054 20.2528 26.5806 19.9123C26.6737 19.7971 26.8159 19.5898 26.9917 19.2833C27.271 18.7963 27.5531 18.1959 27.8226 17.4752ZM48.5586 17.3184V7.72969H55.6831C56.3474 7.72969 56.883 8.26047 56.883 8.9117V16.4576C56.883 17.1088 56.3474 17.6396 55.6831 17.6396H53.3916C52.7274 17.6396 52.1918 17.1088 52.1918 16.4576V10.1081C52.1918 9.67022 51.8369 9.31528 51.399 9.31528C50.9612 9.31528 50.6062 9.67022 50.6062 10.1081V16.4576C50.6062 17.9877 51.8548 19.2252 53.3916 19.2252H55.6831C57.2199 19.2252 58.4686 17.9877 58.4686 16.4576V8.9117C58.4686 7.38157 57.2199 6.14411 55.6831 6.14411H48.5586V3.76573C48.5586 3.32788 48.2037 2.97294 47.7658 2.97294C47.328 2.97294 46.9731 3.32788 46.9731 3.76573V6.14411H44.1983C43.7604 6.14411 43.4055 6.49905 43.4055 6.9369C43.4055 7.37475 43.7604 7.72969 44.1983 7.72969H46.9731V12.465L44.3002 13.5341C43.8937 13.6968 43.696 14.1581 43.8586 14.5647C44.0212 14.9712 44.4826 15.1689 44.8891 15.0063L46.9731 14.1727V17.3184C46.9731 18.3666 46.0906 19.2252 44.9911 19.2252C44.5532 19.2252 44.1983 19.5801 44.1983 20.018C44.1983 20.4558 44.5532 20.8108 44.9911 20.8108C46.9567 20.8108 48.5586 19.2522 48.5586 17.3184Z" fill="white"></path> <path d="M13.3797 16.4636C13.874 15.9701 14.674 15.9714 15.1667 16.4665C15.6593 16.9616 15.6581 17.7631 15.1638 18.2566L12.9691 20.4481C10.9443 22.4699 7.64261 22.4992 5.58369 20.5162C5.57179 20.5048 4.655 19.6058 1.63058 16.6402C-0.381491 14.6673 -0.581941 11.5104 1.31147 9.4831L4.84172 5.7031C6.7209 3.69085 10.1849 3.47093 12.3335 5.20847L15.5398 7.80152C16.0828 8.24065 16.1676 9.03757 15.7292 9.58151C15.2909 10.1254 14.4953 10.2104 13.9523 9.77127L10.746 7.17824C9.62238 6.26954 7.65677 6.39434 6.68718 7.43259L3.15688 11.2126C2.23512 12.1996 2.33607 13.7895 3.39833 14.8311C5.61922 17.0088 7.33084 18.6871 7.33282 18.689C8.40324 19.72 10.134 19.7046 11.185 18.6551L13.3797 16.4636Z" fill="#FFA116"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M8.04824 14.2706C7.35039 14.2706 6.78467 13.7039 6.78467 13.0048C6.78467 12.3057 7.35039 11.739 8.04824 11.739H17.3671C18.0649 11.739 18.6306 12.3057 18.6306 13.0048C18.6306 13.7039 18.0649 14.2706 17.3671 14.2706H8.04824Z" fill="#B3B3B3"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M9.79343 0.401024C10.2702 -0.109469 11.0698 -0.136141 11.5794 0.34145C12.089 0.819042 12.1156 1.62004 11.6389 2.13054L3.15692 11.2126C2.23513 12.1995 2.33608 13.7894 3.39827 14.831L7.31536 18.6721C7.81405 19.1611 7.82258 19.9625 7.33442 20.4621C6.84626 20.9616 6.04626 20.9702 5.54757 20.4812L1.63046 16.6401C-0.381492 14.6671 -0.581942 11.5102 1.31155 9.48305L9.79343 0.401024Z" fill="white"></path> </svg></a><a class="nav-item" title="知识星球" target="_blank" rel="noopener" href="https://wx.zsxq.com/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></a><a class="nav-item" title="语雀" target="_blank" rel="noopener" href="https://www.yuque.com/" style="color:#F44336"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="m13.629 20.472l-.542.916c-.483.816-1.69.816-2.174 0l-.542-.916c-.42-.71-.63-1.066-.968-1.262c-.338-.197-.763-.204-1.613-.219c-1.256-.021-2.043-.098-2.703-.372a5 5 0 0 1-2.706-2.706C2 14.995 2 13.83 2 11.5v-1c0-3.273 0-4.91.737-6.112a5 5 0 0 1 1.65-1.651C5.59 2 7.228 2 10.5 2h3c3.273 0 4.91 0 6.113.737a5 5 0 0 1 1.65 1.65C22 5.59 22 7.228 22 10.5v1c0 2.33 0 3.495-.38 4.413a5 5 0 0 1-2.707 2.706c-.66.274-1.447.35-2.703.372c-.85.015-1.275.022-1.613.219c-.338.196-.548.551-.968 1.262" opacity=".5"/><path fill="currentColor" d="M10.99 14.308c-1.327-.978-3.49-2.84-3.49-4.593c0-2.677 2.475-3.677 4.5-1.609c2.025-2.068 4.5-1.068 4.5 1.609c0 1.752-2.163 3.615-3.49 4.593c-.454.335-.681.502-1.01.502c-.329 0-.556-.167-1.01-.502"/></svg></a></nav>
</div>
<div class="sidebar-check-in">
    <div id="sidebar-check-in-calendar"></div>
</div>
<div class="widgets">
<widget class="widget-wrapper slide-up post-list"><div class="widget-header dis-select"><span class="name">专栏：学习博客</span></div><div class="widget-body"><a class="item" href="/2025/10/23/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Java%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1%E9%A2%98%E7%9B%AE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">场景设计学习笔记-闯架构天宫演诸法,降需求心魔定禅心</span></a><a class="item" href="/2025/10/22/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E7%AC%AC%E4%BA%8C%E7%89%88)/"><span class="title">Spring学习笔记(第二版)-炼金丹炉铸Bean山 布注解阵控轮回盘</span></a><a class="item" href="/2025/10/18/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/MYDB%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"><span class="title">MYDB项目笔记</span></a><a class="item" href="/2025/10/17/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/RAG%E7%9F%A5%E8%AF%86%E5%BA%93%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"><span class="title">RAG知识库项目笔记</span></a><a class="item" href="/2025/10/13/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/SQL%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/"><span class="title">SQL刷题笔记</span></a><a class="item" href="/2025/10/10/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">JVM学习笔记-窥内存洞天观玄机,调GC轮回掌生死</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">设计模式学习笔记-布天罡阵降需求妖,演变化术破代码劫</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">操作系统学习笔记-掌轮回内核定纲常,渡进程内存化阴阳</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">微服务学习笔记-化整为零散作星,聚沙成塔架云台</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">分布式学习笔记-架天网布分布式,炼金丹渡一致劫</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/RocketMQ%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">RocketMQ学习笔记-架消息桥通三界路 施持久咒定乾坤轮</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">MyBatis学习笔记-架映射桥通人神境 写SQL咒调数据兵</span></a><a class="item" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Linux学习笔记-踏终端登灵霄殿,执符咒驭众生器</span></a><a class="item active" href="/2025/09/24/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E7%AE%80%E5%8E%86%E5%AF%B9%E5%BA%94%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9F%A5%E8%AF%86%E7%82%B9/"><span class="title">简历对应知识点</span><svg class="active-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M21 11.098v4.993c0 3.096 0 4.645-.734 5.321c-.35.323-.792.526-1.263.58c-.987.113-2.14-.907-4.445-2.946c-1.02-.901-1.529-1.352-2.118-1.47a2.225 2.225 0 0 0-.88 0c-.59.118-1.099.569-2.118 1.47c-2.305 2.039-3.458 3.059-4.445 2.945a2.238 2.238 0 0 1-1.263-.579C3 20.736 3 19.188 3 16.091v-4.994C3 6.81 3 4.666 4.318 3.333C5.636 2 7.758 2 12 2c4.243 0 6.364 0 7.682 1.332C21 4.665 21 6.81 21 11.098" opacity=".5"/><path fill="currentColor" d="M9 5.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5z"/></svg></a><a class="item" href="/2025/09/09/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/Elasticsearch(ES)%E4%B8%8B%E8%BD%BD%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"><span class="title">Elasticsearch(ES)下载使用指南</span></a><a class="item" href="/2025/08/30/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/git%E7%A7%98%E9%92%A5%E8%BF%87%E6%9C%9F%E5%A4%84%E7%90%86/"><span class="title">Redis学习笔记</span></a><a class="item" href="/2025/08/08/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Java并发编程学习笔记-布天罗网锁线程妖,设八卦阵伏竞态魔</span></a><a class="item" href="/2025/08/06/3DGS/SSH%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"><span class="title">SSH远程调用开发环境</span></a><a class="item" href="/2025/08/05/3DGS/Ubuntu20%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E7%89%88%E6%9C%ACCUDA/"><span class="title">Ubuntu20使用多个版本CUDA</span></a><a class="item" href="/2025/08/04/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/Thymeleaf%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E/"><span class="title">Thymeleaf模版引擎</span></a><a class="item" href="/2025/08/01/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Java集合框架学习笔记-开乾坤袋纳百川 布玲珑局定山河</span></a><a class="item" href="/2025/07/30/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/Natapp/"><span class="title">Natapp内网穿透使用</span></a><a class="item" href="/2025/07/25/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95/"><span class="title">微信扫码登录</span></a><a class="item" href="/2025/07/25/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/%E7%81%B5%E8%8C%B6%E5%B1%B1%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"><span class="title">灵茶山算法基础笔记</span></a><a class="item" href="/2025/07/25/Go%E5%9F%BA%E7%A1%80/Go%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"><span class="title">Go基础笔记</span></a><a class="item" href="/2025/07/22/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Redis学习笔记-燃内存真火照幽冥 布集群阵通九霄</span></a><a class="item" href="/2025/07/22/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/JavaSE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">JavaSE学习笔记-筑基篇开修行路,炼气层破语法障</span></a><a class="item" href="/2025/07/14/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%85%BB%E7%94%9F%E6%8C%87%E5%8D%97/"><span class="title">程序员养生指南-调阴阳戒久坐劫 通经脉战代码妖</span></a><a class="item" href="/2025/07/14/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">计算机网络学习笔记-布协议栈通三界,架路由桥渡万维</span></a><a class="item" href="/2025/07/12/3DGS/%E4%BD%BF%E7%94%A8Postshot%E8%AE%AD%E7%BB%833DGS%E6%B5%81%E7%A8%8B/"><span class="title">使用Postshot训练3DGS模型流程</span></a><a class="item" href="/2025/07/09/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/%E8%B7%A8%E5%9F%9F%E6%94%AF%E6%8C%81%E7%AC%94%E8%AE%B0/"><span class="title">跨域支持笔记</span></a><a class="item" href="/2025/07/09/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/MybatisPlus%E7%AC%94%E8%AE%B0/"><span class="title">MybatisPlus笔记</span></a><a class="item" href="/2025/06/25/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/TecHub%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"><span class="title">TecHub项目笔记</span></a><a class="item" href="/2025/06/24/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E6%B4%BE%E7%8E%AF%E5%A2%83%E9%97%AE%E9%A2%98/"><span class="title">技术派项目环境问题</span></a><a class="item" href="/2025/06/24/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unity%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/"><span class="title">Unity游戏开发笔记</span></a><a class="item" href="/2025/06/21/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/%E4%B8%80%E6%AC%A1%E6%80%A7%E6%90%9E%E6%87%82B%E6%A0%91/"><span class="title">一次性搞懂B树</span></a><a class="item" href="/2025/06/12/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Spring学习笔记-开IOC瓶纳百川水 织AOP网覆三界尘</span></a><a class="item" href="/2025/06/11/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/nvm%E6%9B%B4%E6%94%B9node%E7%89%88%E6%9C%AC/"><span class="title">nvm更改node版本</span></a><a class="item" href="/2025/06/11/3DGS/3DGS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">3DGS学习笔记-撒神经点布星云阵 炼辐射场塑造化身</span></a><a class="item" href="/2025/06/11/3DGS/3DGS-Ubuntu%E7%8E%AF%E5%A2%83/"><span class="title">3DGS-Ubuntu环境.md</span></a><a class="item" href="/2025/06/10/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E7%AC%94%E8%AE%B0/"><span class="title">Java集合框架笔记</span></a><a class="item" href="/2025/06/10/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Mysql学习笔记-布B+树阵锁苍龙 写SQL真言召天兵</span></a><a class="item" href="/2025/06/09/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">JVM学习笔记</span></a><a class="item" href="/2025/06/07/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/Java%E5%B9%B6%E5%8F%91%E7%AF%87/"><span class="title">Java并发篇</span></a><a class="item" href="/2025/06/06/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/%E5%B8%B8%E7%94%A8%E7%BB%84%E5%90%88%E9%94%AE%E8%AE%B0%E5%BD%95/"><span class="title">常用组合键记录-结印诀腾挪三界,弹指间呼风唤雨</span></a><a class="item" href="/2025/06/06/%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/java30%E5%A4%A9%E7%AC%94%E8%AE%B0/"><span class="title">java30天学习笔记</span></a><a class="item" href="/2025/06/05/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/hello-world/"><span class="title">Hello World</span></a><a class="item" href="/2025/06/04/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E6%B4%BE%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"><span class="title">技术派项目笔记</span></a><a class="item" href="/2025/06/02/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/"><span class="title">个人博客搭建指南-架祥云自建菩提境,点慧灯独照博客天</span></a><a class="item" href="/2025/06/01/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/RabbitMQ%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8/"><span class="title">RabbitMQ项目使用</span></a><a class="item" href="/2025/06/01/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">数据结构算法学习笔记-布天罡阵伏算法妖 炼金石破数据结构</span></a></div></widget>

<widget class="widget-wrapper slide-up post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/2025/07/22/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Redis学习笔记-燃内存真火照幽冥 布集群阵通九霄</span></a><a class="item title" href="/2025/10/23/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B025%E5%B9%B410%E6%9C%88/2025.10.23%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">2025.10.23学习日记</span></a><a class="item title" href="/2025/10/23/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Java%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1%E9%A2%98%E7%9B%AE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">场景设计学习笔记-闯架构天宫演诸法,降需求心魔定禅心</span></a><a class="item title" href="/2025/07/14/%E6%9D%82%E9%A1%B9%E7%AC%94%E8%AE%B0/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%85%BB%E7%94%9F%E6%8C%87%E5%8D%97/"><span class="title">程序员养生指南-调阴阳戒久坐劫 通经脉战代码妖</span></a><a class="item title" href="/2025/07/25/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/%E7%81%B5%E8%8C%B6%E5%B1%B1%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"><span class="title">灵茶山算法基础笔记</span></a><a class="item title" href="/2025/06/11/3DGS/3DGS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">3DGS学习笔记-撒神经点布星云阵 炼辐射场塑造化身</span></a><a class="item title" href="/2025/10/22/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E7%AC%AC%E4%BA%8C%E7%89%88)/"><span class="title">Spring学习笔记(第二版)-炼金丹炉铸Bean山 布注解阵控轮回盘</span></a><a class="item title" href="/2025/06/12/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Spring学习笔记-开IOC瓶纳百川水 织AOP网覆三界尘</span></a><a class="item title" href="/2025/09/29/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/RocketMQ%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">RocketMQ学习笔记-架消息桥通三界路 施持久咒定乾坤轮</span></a><a class="item title" href="/2025/06/10/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="title">Mysql学习笔记-布B+树阵锁苍龙 写SQL真言召天兵</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>
<span class="sep"></span><a class="cap breadcrumb" id="menu" href="/topic">专栏</a><span class="sep"></span><a class="cap breadcrumb" id="proj" href="/2025/10/23/Java%E9%97%AE%E7%AD%94%E7%AC%94%E8%AE%B0/Java%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1%E9%A2%98%E7%9B%AE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习博客</a></div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2025-09-23T16:00:00.000Z">2025-09-24</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2025-10-23T02:46:41.147Z">2025-10-23</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>简历对应知识点</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content slide-up"><h2 id="专业技能"><a href="#专业技能" class="headerlink" title="专业技能"></a>专业技能</h2><h3 id="Java基础"><a href="#Java基础" class="headerlink" title="Java基础"></a>Java基础</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**Java基础** </span><br><span class="line">Java 基础扎实，理解 ArrayList、LinkedList、HashMap 等常见容器的实现原理，面向对象编程思想。</span><br></pre></td></tr></table></figure>


<h4 id="常见容器的实现原理"><a href="#常见容器的实现原理" class="headerlink" title="常见容器的实现原理"></a>常见容器的实现原理</h4><p>这一部分详细可以转到笔记:Java集合框架学习笔记.</p>
<h5 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h5><p>首先是<a target="_blank" rel="noopener" href="https://javabetter.cn/collection/arraylist.html">ArrayList</a>.<br>ArrayList 实现了 List 接口，并且是基于数组实现的。<br>数组的大小是固定的，一旦创建的时候指定了大小，就不能再调整了。也就是说，如果数组满了，就不能再添加任何元素了。ArrayList 在数组的基础上实现了自动扩容，并且提供了比数组更丰富的预定义方法（各种增删改查），非常灵活。</p>
<p>在扩容时,ArrayList 会创建一个新的数组,并且将原数组中的元素复制到新数组中.新数组的大小是原数组的 1.5 倍(<code>oldCapacity &gt;&gt; 1</code>).</p>
<p><strong>时间复杂度:</strong><br>查询元素:O(1)<br>添删元素:O(n)</p>
<h5 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h5><p>然后是<a target="_blank" rel="noopener" href="https://javabetter.cn/collection/linkedlist.html">LinkedList</a><br>其实就是基于链表实现的,类定义了一个静态内部类 Node,每个 Node 节点包含了节点上的元素,下一个节点,上一个节点.<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251014135635.png" alt="20251014135635"></p>
<p><strong>时间复杂度:</strong><br>查询元素:O(n)<br>添删元素:O(1)</p>
<p>可以用LinkedList实现LRU缓存淘汰策略.</p>
<h5 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h5><p>HashMap 可以用于缓存、索引等场景。</p>
<p>HashMap 的实现原理是基于哈希表的，它的底层是一个数组，数组的每个位置可能是一个<strong>链表</strong>或<strong>红黑树</strong>，也可能<strong>只是一个键值对</strong>。<br>当添加一个键值对时，HashMap 会根据键的哈希值计算出该键对应的数组下标（索引），然后将键值对插入到对应的位置。<br>当通过键查找值时，HashMap 也会根据键的哈希值计算出数组下标，并查找对应的值。</p>
<p><strong>hash 方法的原理</strong><br>在Java8中的hash方法.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HashMap 的底层是通过数组的形式实现的，初始大小是 16 .</p>
<p>通过<code>(n - 1) &amp; hash</code>可以将哈希值映射到数组的下标.</p>
<p><strong>取模运算 VS 取余运算 VS 与运算</strong></p>
<p>在 Java 中，通常用 Math.floorMod() 来表示取模,使用 % 运算符来表示取余。<br>在除数和被除数都是非负的时候,二者没有差别.<br><strong>取模运算的商向负无穷靠近</strong>；<strong>取余运算的商向 0 靠近</strong>。这是导致它们两个在处理有负数情况下，结果不同的根本原因。<br><code>a % b = a - (a / b) * b</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数字: a = -7, b = 3</span><br><span class="line">取模 (Math.floorMod): 2</span><br><span class="line">取余 (%): -1</span><br><span class="line"></span><br><span class="line">数字: a = 7, b = -3</span><br><span class="line">取模 (Math.floorMod): -2</span><br><span class="line">取余 (%): 1</span><br></pre></td></tr></table></figure>
<p>而当对长度为 2 的 n 次方的数组进行取模运算时,<code>hash &amp; (length - 1) = hash % length</code><br>这是因为当 length 是 2 的 n 次方时,length - 1 的二进制表示全为 1,与 hash 进行按位与运算,就相当于对 hash 取模.</p>
<p>然后话说回来,方法中还对hashCode进行了处理,将hashCode的高16位与低16位进行了异或运算,这是为了<strong>减少哈希冲突</strong>的概率.相当于共同利用了高位和低位的信息.</p>
<p><strong>扩容原理</strong><br>HashMap 的底层用的也是数组。<br>HashMap的扩容会使用到resize方法,当HashMap的元素数量超过了阈值（负载因子 * 数组长度）时，就会触发扩容。<br>扩容会创建一个新的数组，新数组的大小是原数组的 2 倍。<br>然后将原数组中的元素重新哈希到新数组中。</p>
<p><strong>transfer 方法</strong><br>有扩容就有transfer 方法,用于将原数组中的元素重新哈希到新数组中.</p>
<p>1、获取原来的数组 table、数组长度 oldCap 和阈值 oldThr。</p>
<p>2、如果原来的数组 table 不为空，则根据扩容规则计算新数组长度 newCap 和新阈值 newThr，然后将原数组中的元素复制到新数组中。</p>
<p>3、如果原来的数组 table 为空但阈值 oldThr 不为零，则说明是通过带参数构造方法创建的 HashMap，此时将阈值作为新数组长度 newCap。</p>
<p>4、如果原来的数组 table 和阈值 oldThr 都为零，则说明是通过无参数构造方法创建的 HashMap，此时将默认初始容量 DEFAULT_INITIAL_CAPACITY（16）和默认负载因子 DEFAULT_LOAD_FACTOR（0.75）计算出新数组长度 newCap 和新阈值 newThr。</p>
<p>5、计算新阈值 threshold，并将其赋值给成员变量 threshold。</p>
<p>6、创建新数组 newTab，并将其赋值给成员变量 table。</p>
<p>7、如果旧数组 oldTab 不为空，则遍历旧数组的每个元素，将其复制到新数组中。</p>
<p>8、返回新数组 newTab。</p>
<p>并且扩容后会使用<code>hash &amp; (newCapacity - 1)</code>来计算新的数组下标.</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251014151625.png" alt="20251014151625"><br>也就是说，在 JDK 8 的新 hash 算法下，数组扩容后的索引位置，要么就是原来的索引位置，要么就是“原索引+原来的容量”，遵循一定的规律。<br>这个功劳既属于新的哈希算法，也离不开 n 为 2 的整数次幂这个前提，这是它俩通力合作后的结果 hash &amp; (newCapacity - 1)。</p>
<p><strong>加载因子为什么是 0.75</strong><br>加载因子也被称为填充因子，它是指哈希表中已存储元素的比例与哈希表总容量的比例。</p>
<p>如果负载因子过大，填充因子较多，那么哈希表中的元素就会越来越多地聚集在少数的桶中，这就导致了冲突的增加，这些冲突会导致查找、插入和删除操作的效率下降。同时，这也会导致需要更频繁地进行扩容，进一步降低了性能。<br>如果负载因子过小，那么桶的数量会很多，虽然可以减少冲突，但是在空间利用上面也会有浪费，因此选择 0.75 是为了取得一个平衡点，即在时间和空间成本之间取得一个比较好的平衡点。</p>
<p><strong>线程不安全</strong></p>
<ul>
<li><p>多线程下扩容会死循环<br>扩容时现在会保持元素的顺序,所以在Java8的时候,问题已经被修复了.</p>
</li>
<li><p>多线程下 put 会导致元素丢失<br>多线程同时执行 put 操作时，如果计算出来的索引位置是相同的，那会造成前一个 key 被后一个 key 覆盖，从而导致元素的丢失。</p>
</li>
<li><p>put 和 get 并发时会导致 get 到 null<br>线程 1 执行 put 时，因为元素个数超出阈值而导致出现扩容，线程 2 此时执行 get，就有可能出现这个问题。</p>
</li>
</ul>
<p>HashMap 采用数组+链表&#x2F;红黑树的存储结构，能够在 O(1)的时间复杂度内实现元素的添加、删除、查找等操作。</p>
<h4 id="面向对象编程思想"><a href="#面向对象编程思想" class="headerlink" title="面向对象编程思想"></a>面向对象编程思想</h4><p><a target="_blank" rel="noopener" href="https://javabetter.cn/oo/object-class.html">面向对象编程链接</a></p>
<h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**JVM：**</span><br><span class="line">熟悉JVM运行时原理，包括运行时数据区、垃圾回收算法、常用垃圾回收器、类加载机制（双亲委派）。</span><br></pre></td></tr></table></figure>


<h3 id="JUC"><a href="#JUC" class="headerlink" title="JUC"></a>JUC</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**JUC：**</span><br><span class="line">掌握线程池、synchronized 关键字、volatile 关键字、AQS、ThreadLocal 等并发知识。</span><br></pre></td></tr></table></figure>

<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**MySQL：**</span><br><span class="line">掌握 MySQL，熟悉 MySQL 的事务、索引、多版本并发控制、锁机制和 SQL 调优。</span><br></pre></td></tr></table></figure>

<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**Redis：**</span><br><span class="line">熟练使用 Redis，熟悉 Redis 常用的数据类型及原理，掌握缓存更新策略、缓存穿透、雪崩和击穿的解决方案。</span><br></pre></td></tr></table></figure>

<h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**框架：**</span><br><span class="line">熟练使用 SpringBoot 和 MyBatis-Plus 等常用开发框架，熟悉IoC、AOP、三级缓存解决循环依赖  的原理，以及Spring Boot 的自动装配机制。</span><br></pre></td></tr></table></figure>
<h3 id="计算机基础"><a href="#计算机基础" class="headerlink" title="计算机基础"></a>计算机基础</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**计算机基础：**</span><br><span class="line">熟悉常用的数据结构与算法（如递归、贪心、动态规划、回溯等），了解 TCP/IP 的四层网络模型。</span><br></pre></td></tr></table></figure>


<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**其他：**</span><br><span class="line">了解Git、Maven等项目管理及构建工具，熟悉深度学习常用模型（CNN、RNN），有一定的 AI Coding 经验。</span><br></pre></td></tr></table></figure>

<h2 id="实习经历"><a href="#实习经历" class="headerlink" title="实习经历"></a>实习经历</h2><h3 id="项目-RAG"><a href="#项目-RAG" class="headerlink" title="项目-RAG"></a>项目-RAG</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**项目描述：** 构建公司内部进行技术交流及设备操作指南的智能问答系统，支持多格式技术文档上传与解析，结合语义检索与大模型为用户提供技术咨询。系统实现多级权限管控，保障敏感信息安全，并通过流式对话与上下文记忆提升效率。</span><br></pre></td></tr></table></figure>
<h4 id="介绍一下你的RAG项目"><a href="#介绍一下你的RAG项目" class="headerlink" title="介绍一下你的RAG项目"></a>介绍一下你的RAG项目</h4><p>我们这个项目是一个智能的知识管理系统。简单来说，就是帮助企业和个人更好地管理和检索文档知识的平台。<br>整个系统主要分为几个核心模块。首先是<strong>文档处理模块</strong>，用户可以上传各种格式的文档，比如 PDF、Word、文本文件等等。我们用 <code>Apache Tika</code> 来解析这些文档，提取出文本内容，然后把长文档切分成小的文本块，这样便于后续的检索和处理。</p>
<p>然后是<strong>向量化模块</strong>，这是比较核心的技术部分。我们会把文档的文本内容转换成向量表示，利用现在比较流行的 <code>embedding</code> 技术，让计算机能够理解文本的语义含义。这些向量数据会存储在 <code>Elasticsearch</code> 中，方便后续的快速检索。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104546.png" alt="20251017104546"></p>
<p>接下来是知识检索模块，这也是用户最直接接触的功能。我们实现了<strong>混合检索算法</strong>，既支持传统的关键词搜索，也支持语义相似度搜索。用户输入一个问题，系统会找到最相关的文档片段返回给用户。而且我们还做了<strong>权限控制</strong>，不同用户只能搜索到自己有权限看的内容。<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104636.png" alt="20251017104636"></p>
<p>在技术架构上，后端用的是 <code>Spring Boot</code>，数据库用 <code>MySQL</code> 存储元数据，<code>Redis</code> 做缓存，<code>Kafka</code> 处理异步任务。<br>前端是 Vue3 + TypeScript 的单页应用，界面比较现代化，用户体验还不错。</p>
<p>整个系统还支持实时对话功能，用户可以通过聊天的方式来查询知识，就像和一个智能助手对话一样。我们用 <code>WebSocket</code> 来实现实时通信，让交互更加流畅。</p>
<p>目前这个项目已经基本完成了核心功能的开发，包括<strong>文档上传、解析、向量化、检索等</strong>全流程。下一步我们计划优化搜索算法的准确性，还有就是增加更多的文档格式支持。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104828.png" alt="20251017104828"></p>
<p>总的来说，这是一个结合了传统信息检索和现代 AI 技术的知识管理平台，尤其是 RAG 技术的应用，希望能够帮助企业&#x2F;用户更高效地利用已有的知识资源。</p>
<h4 id="RAG整体设计方案"><a href="#RAG整体设计方案" class="headerlink" title="RAG整体设计方案"></a>RAG整体设计方案</h4><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017104919.png" alt="20251017104919"></p>
<h5 id="业务架构设计"><a href="#业务架构设计" class="headerlink" title="业务架构设计"></a>业务架构设计</h5><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017105303.png" alt="20251017105303"></p>
<h5 id="用户层"><a href="#用户层" class="headerlink" title="用户层"></a>用户层</h5><p>用户层是整个系统的入口，主要面向两类用户群体。<br>普通用户可以通过这一层进行日常的知识查询、文档上传和智能对话等操作，他们是系统的主要使用者，通过简洁直观的界面就能享受到智能的知识服务。<br>管理员则拥有更高的权限，可以进行系统配置、用户管理、数据监控等管理工作，确保整个平台的稳定运行和安全性。</p>
<h5 id="逻辑层"><a href="#逻辑层" class="headerlink" title="逻辑层"></a>逻辑层</h5><p>逻辑层是整个系统的核心，包含四个主要的功能模块，每个模块都承担着特定的业务职责。</p>
<p><strong>1. 用户管理模块</strong><br>该模块是系统安全和权限控制的基础。注册登录功能为用户提供了基础的身份认证机制，确保只有合法用户才能访问系统资源。<br>权限控制功能会根据用户的角色和级别，精确控制用户能够访问的功能和数据范围，比如某些敏感文档只有特定部门的用户才能查看。组织标签管理功能帮助企业按照部门、项目或其他维度对用户进行分组管理，使得权限分配更加灵活和精确。</p>
<p><strong>2. 文档上传与处理模块</strong><br>该模块是知识输入的关键环节，负责将各种格式的文档转化为系统可以理解和处理的知识内容。文档上传功能支持多种常见的文档格式，包括 <strong>PDF、Word、文本文件等</strong>，系统会自动进行格式识别和处理。<br>文本提取功能是这个模块的核心技术之一，我们使用了 <code>Apache Tika</code> 的文档解析技术，能够准确地从各种格式的文档中提取出纯文本内容，同时保留重要的结构信息。文本向量化功能则将提取出的文本转换为计算机可以理解的数学向量，这是实现语义搜索的关键技术，让系统能够理解文本的真正含义而不仅仅是关键词匹配。</p>
<p>组织标签关联功能确保每个文档都能正确地归属到相应的组织或部门，这不仅有助于权限控制，也便于用户在自己的权限范围内快速找到相关文档。可见性设置功能则允许文档上传者设定文档的可见范围，比如设为公开、部门内可见或仅个人可见，灵活满足不同的共享需求。</p>
<p><strong>3. 知识库检索模块</strong><br>检索模块是用户获取知识的主要途径，我们采用了先进的混合检索技术。语义检索功能利用 RAG 技术，能够理解用户查询的真正意图，即使用户使用的词汇与文档中的表述不完全一致，系统也能找到相关的内容。<br>组织权限过滤功能确保用户只能看到自己有权限访问的搜索结果，这不仅保护了敏感信息的安全，也提高了搜索结果的精准度，避免用户被无关的信息干扰。</p>
<p><strong>4. 聊天助手模块</strong><br>聊天助手模块为用户提供了更加自然和智能的知识获取方式。基于 WebSocket 进行实时通信，用户方法就像和真人助手交流一样。多轮对话功能让系统能够记住对话的上下文，用户可以进行连续的提问，系统会根据之前的对话内容来理解当前的问题。<br>本地知识库集成功能是这个模块的核心优势，系统会根据用户的问题自动搜索相关的文档内容，并将这些信息整合到回答中。这样用户不仅能得到通用的答案，更能获得基于企业内部知识的专业回答。<br>Prompt 构建与管理功能负责优化与 AI 模型的交互方式，通过精心设计的提示词模板，确保 AI 能够更好地理解用户意图并提供高质量的回答。大语言模型集成功能则让系统能够利用最新的 AI 技术，提供更加智能和自然的对话体验。</p>
<h5 id="数据层"><a href="#数据层" class="headerlink" title="数据层"></a>数据层</h5><p>数据层为整个系统提供了可靠的数据存储和管理基础。用户信息存储负责保存用户的身份信息、权限设置、使用偏好等数据。组织标签数据管理维护着企业的组织架构信息，为权限控制和数据分类提供基础支持。<br>对话数据存储记录了用户与系统的所有交互历史，这不仅便于用户回顾之前的对话内容，也为系统优化和个性化服务提供了宝贵的数据资源。文件存储系统则负责保存用户上传的原始文档。<br>向量化数据存储是系统实现智能检索的技术基础，它保存着所有文档内容的向量表示，这些数据经过精心的索引和优化，能够支持大规模的实时检索操作。</p>
<h4 id="业务流程设计"><a href="#业务流程设计" class="headerlink" title="业务流程设计"></a>业务流程设计</h4><h5 id="文档向量"><a href="#文档向量" class="headerlink" title="文档向量"></a>文档向量</h5><p>派聪明的文档处理与向量化是一个完整的自动化流程，涉及用户、文件服务、向量化服务、Elasticsearch 和 MySQL 等多个组件的协同工作。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017110306.png" alt="20251017110306"></p>
<p>整个流程从用户上传文档开始。用户通过前端界面选择文档并设置相关的组织标签和可见性权限后，系统开始接收文档。这个阶段的关键是建立文档的基本信息记录，包括文件的 MD5 哈希值、原始文件名、文件大小、上传用户信息等。<strong>系统会为每个文档生成唯一的标识符</strong>，并将文档的元数据信息存储到 MySQL 数据库中，同时将原始文件保存到文件存储系统中。</p>
<p>文档上传完成后，系统进入分块处理阶段。这个阶段采用循环处理的方式，逐个处理文档中的内容片段。首先，系统会调用文件服务来读取原始文档，然后使用 <code>Apache Tika</code> 等文档解析工具提取出纯文本内容。由于完整的文档通常内容较长，直接进行向量化处理会影响检索的精确度，因此系统会将提取出的文本按照一定的规则进行分块，比如按段落、按字数或按语义单元进行切分。每个文本块都会被分配一个块序号，确保能够准确定位到文档中的具体位置。</p>
<p>在分块完成后，系统会对生成的文本块进行合并和优化处理。这个步骤主要是为了确保文本块的质量和完整性。系统会检查相邻的文本块是否存在语义上的连续性，如果某些块过短或者语义不完整，会考虑与相邻块进行合并。同时，系统还会过滤掉一些无意义的内容，比如页眉页脚、图片说明等，确保每个文本块都包含有价值的信息内容。</p>
<p>文本块准备就绪后，系统开始进行向量化处理。这个阶段同样采用循环处理的方式，逐个处理每个文本块。系统会调用向量化服务，将文本块的内容发送给向量模型（Embedding Model）进行向量转换。向量模型会将文本内容转换为高维度的数学向量，这些向量能够表示文本的语义特征。向量化服务在完成转换后，会将生成的向量数据返回给系统。这个过程可能需要一定的时间，特别是当文档较大或者文本块较多时，因此系统采用了异步处理的方式来提高效率。</p>
<p>向量化完成后，系统需要将生成的向量数据进行持久化存储。这个阶段涉及两个存储系统的协同工作。首先，系统会将向量数据连同相关的文本内容、文档标识、块序号等信息一起存储到 <code>Elasticsearch</code> 中。<code>Elasticsearch</code> 作为专业的搜索引擎，不仅能够存储向量数据，还能够提供高效的向量相似度搜索功能。同时，系统还会将文档的元数据信息更新到 MySQL 数据库中，包括处理状态、向量化完成时间等信息，确保数据的一致性和完整性。</p>
<p>数据存储完成后，<code>Elasticsearch</code> 会自动为新增的向量数据构建索引。这个过程包括创建倒排索引用于关键词搜索，以及构建向量索引用于语义相似度搜索。系统会根据预设的索引策略对数据进行分片和副本设置，确保搜索性能和数据安全性。索引构建完成后，这些文档内容就可以被用户通过各种方式进行检索和查询了。</p>
<p>在整个流程中，系统还包含了完善的异常处理和监控机制。如果在任何一个环节出现错误，比如文档解析失败、向量化服务不可用、存储系统异常等，系统都会记录详细的错误信息，并根据错误类型采取相应的处理策略。对于可恢复的错误，系统会自动进行重试；对于不可恢复的错误，系统会标记处理状态并通知管理员。同时，系统还会实时监控各个组件的运行状态和性能指标，确保整个流程的稳定性和高效性。</p>
<h5 id="知识检索"><a href="#知识检索" class="headerlink" title="知识检索"></a>知识检索</h5><p>整个知识检索流程体现了 RAG 智能知识库管理系统的核心特征：语义理解、权限控制、高性能检索和用户友好的交互体验。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017111404.png" alt="20251017111404"></p>
<p>第一阶段是用户查询请求。用户通过前端界面发起查询请求，系统首先接收用户的自然语言查询文本，并通过 WebSocket 实时传输到后端服务。</p>
<p>第二阶段是查询预处理与向量化。查询服务接收到用户请求后，会获取用户的组织标签信息和权限数据，确保后续检索符合权限控制要求。同时，系统将查询文本发送给向量化服务进行向量化处理，将自然语言转换为高维向量表示，这是实现语义检索的关键步骤。</p>
<p>第三阶段是混合检索执行。HybridSearchService.java 执行核心的混合检索逻辑。系统构建包含权限过滤条件的综合查询，结合向量相似度检索和关键词匹配，在 Elasticsearch 中进行高效搜索。这种混合检索策略既保证了语义理解的准确性，又兼顾了关键词匹配的精确性。</p>
<p>第四阶段是结果排序与权限过滤。检索到的候选结果会经过严格的权限验证，确保用户只能访问有权限的知识内容。系统根据相似度得分、关键词匹配度等多个维度对结果进行综合排序，并按照 SearchRequest.java 中定义的 topK 参数返回最相关的结果。</p>
<p>第五阶段是结果返回与展示。最终的知识片段通过 SearchController.java返回给前端， chat-message.vue组件负责渲染和展示检索结果，为用户提供直观的知识获取体验。</p>
<h5 id="聊天助手"><a href="#聊天助手" class="headerlink" title="聊天助手"></a>聊天助手</h5><p>整个聊天助手流程体现了现代 AI 应用的核心特征：实时性、智能性、可靠性和用户友好性。<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017111616.png" alt="20251017111616"></p>
<p>第一步是用户通过 WebSocket 发送问题。用户在 input-box.vue 组件中输入问题，点击发送按钮后，前端通过 index.ts中的 WebSocket 连接发送消息。系统使用 @vueuse&#x2F;core 的 useWebSocket 建立连接，支持自动重连机制。前端会先将用户消息添加到对话列表，然后通过 chatStore.wsSend(input.value.message) 发送到后端。</p>
<p>第二步是系统调用知识检索模块获取相关内容。ChatWebSocketHandler.java 接收到 WebSocket 消息后，调用 ChatHandler.java 的 processMessage 方法。系统首先获取或创建会话 ID，然后调用 searchService.searchWithPermission(userMessage, userId, 5) 执行带权限过滤的混合搜索，从 Elasticsearch 中检索最相关的 5 条知识片段，确保用户只能访问有权限的内容。</p>
<p>第三步是系统构建包含检索结果和历史对话的 Prompt。系统通过 getConversationHistory(conversationId) 从 Redis 中获取对话历史记录，支持最近 20 条消息的上下文保持。然后调用 buildContext(searchResults) 方法将检索到的知识片段格式化为上下文信息，每个片段限制在 300 字符内并编号标记。这样构建的 Prompt 既包含了相关的知识背景，又保持了对话的连续性。</p>
<p>第四步是调用大语言模型 API 生成回答。系统调用 DeepSeekClient.java 的 streamResponse 方法，将用户问题、构建的上下文和对话历史一起发送给 DeepSeek API。这个过程采用流式调用方式，能够实时接收 AI 生成的内容片段，而不需要等待完整回答生成完毕。</p>
<p>第五步是通过 WebSocket 流式返回生成内容。当 DeepSeek API 返回内容片段时，系统通过 sendResponseChunk 方法将每个 chunk 包装成 JSON 格式 （ {“chunk”: “内容片段”} ） 并通过 WebSocket 实时发送给前端。前端在 input-box.vue 中监听 wsData 变化，当接收到包含 chunk 字段的数据时，会将内容追加到助手消息的 content 中，实现打字机效果的实时显示。</p>
<p>第六步是保存对话记录到数据库。当 AI 回答完成后，系统通过后台线程检测响应完成状态，然后调用 updateConversationHistory 方法将完整的用户问题和 AI 回答保存到 Redis 中。对话记录包含角色标识（user&#x2F;assistant）、内容和时间戳，支持 7 天的数据保留期。同时发送完成通知（ {“type”: “completion”, “status”: “finished”} ）给前端，前端接收后将消息状态更新为”finished”。</p>
<h5 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h5><p>派聪明实现了一套完整的组织权限管理体系，从管理员创建组织标签到用户文件访问控制形成了完整的权限管理闭环。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017112027.png" alt="20251017112027"></p>
<p>整个权限管理流程始于管理员通过 AdminController.java 中的接口创建和管理组织标签。管理员可以通过 POST &#x2F;api&#x2F;admin&#x2F;org-tags 接口创建具有层级结构的组织标签，支持设置标签 ID、名称、描述和父级标签，所有标签信息都存储在 ddl.sql定义的 organization_tags 表中。</p>
<p>在组织标签创建完成后，管理员通过 PUT &#x2F;api&#x2F;admin&#x2F;users&#x2F;{userId}&#x2F;org-tags 接口为用户分配相应的组织标签。这些标签以逗号分隔的字符串形式存储在用户表的 org_tags 字段中。系统的一个重要特性是支持层级权限继承， OrgTagCacheService.java 负责计算用户的有效组织标签，确保用户在拥有父级标签时自动获得所有子级标签的访问权限。为了提高查询性能，系统使用 Redis 缓存用户的有效组织标签信息。</p>
<p>当用户上传文件时，前端的 upload-dialog.vue 提供了直观的权限设置界面。管理员可以通过级联选择器选择任意组织标签，而普通用户只能选择自己被分配的组织标签。同时，用户需要设置文件的可见性级别，选择公开或私有。后端的 UploadController.java 在处理文件上传时会接收这些权限参数，如果用户未指定组织标签，系统会自动使用用户的主组织标签，确保每个文件都有明确的权限归属。</p>
<p>系统的权限控制核心在于 OrgTagAuthorizationFilter.java ，这个过滤器统一处理所有 API 请求的权限验证。它采用了智能的权限判断逻辑：公开资源直接允许访问，默认组织或无组织标签的资源也允许访问，私有标签资源仅限所有者和管理员访问，其他情况则需要检查用户的有效组织标签是否与资源的组织标签匹配。</p>
<p>在知识检索环节， HybridSearchService.java 的 searchWithPermission 方法确保用户只能检索到有权限访问的内容。系统会获取用户的有效组织标签，并在 <code>Elasticsearch</code> 查询中添加相应的<strong>权限过滤条件</strong>，无论是向量搜索还是文本搜索都会应用这些权限限制。</p>
<p>最终，用户通过 <code>DocumentService.java</code>只能看到自己有权访问的文件和内容。这包括用户自己上传的文件、标记为公开的文件、用户所属组织标签的文件以及默认组织的文件。</p>
<p>这套权限管理体系的技术特色体现在多个方面：层级权限继承机制让组织结构管理更加灵活，Redis 缓存能显著提升权限查询性能，统一的权限过滤器确保了所有 API 的一致性安全控制。从文件上传到知识检索的全链路权限控制则构建了完整的数据安全防护体系。</p>
<p><a target="_blank" rel="noopener" href="https://paicoding.com/column/10/12">技术派-派聪明博客</a></p>
<h4 id="技术架构设计"><a href="#技术架构设计" class="headerlink" title="技术架构设计"></a>技术架构设计</h4><p>采用了分层架构设计，从上到下分为前端展示层、API 与安全层、业务逻辑层、数据访问层和数据存储层，同时集成了外部依赖服务，形成了完整的企业级应用架构。<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017112332.png" alt="20251017112332"></p>
<p>安全层是整个系统的防护屏障，集成了多重安全机制。RESTful API 提供了标准化的接口服务，Spring WebSocket 支持实时通信功能，这对于聊天对话等交互场景至关重要。Spring Security 框架负责整体的安全控制，而 JWT 认证机制则确保了无状态的用户身份验证。</p>
<p>业务逻辑层是系统的核心，分为四个主要功能模块。用户管理模块包含 BCrypt 加密、JWT Token 生成和 RBAC 权限控制，以及 OrgTags 管理。文件上传与处理模块实现了分片上传、断点续传、文件合并和异步任务调度等功能。知识库索引模块负责同义生成、ES 索引管理、向量检索和文件权限过滤，这是智能检索功能的技术基础。对话交互模块集成了 WebFlux 响应式编程、Prompt 构建、DeepSeek Client 和会话管理，可以为用户提供流畅的 AI 对话体验。</p>
<p>数据访问层用了 Spring Data JPA 来简化数据库操作，Hibernate 作为 ORM 框架用来实现对象的关系映射。</p>
<p>数据存储层采用了多元化的存储策略。MySQL 作为主数据库，存储用户信息、文件元数据等结构化数据。Redis 作为缓存服务，用于存储会话信息、权限缓存等热点数据。MinIO 对象存储专门处理文件存储需求，支持大容量文件的分布式存储。Elasticsearch 负责全文检索和向量搜索，下一个版本可以用 FAISS，Meta 开源的这个向量数据库可以优化向量相似度计算。</p>
<p>派聪明还集成了多个外部服务。<code>DeepSeek API</code> 用于智能对话和内容生成。<code>Embedding API </code>负责文本向量化，将自然语言转换为数学向量，这是实现语义检索的关键。Kafka 消息队列处理异步任务，确保系统的高并发处理能力。LogBack 提供了完善的日志管理，支持系统监控和问题排查。Apache Tika 则负责多格式文档解析，支持 PDF、Word、Excel 等多种文件格式的内容提取。</p>
<p>整个后端技术栈包括：<br>框架：Spring Boot 3.x<br>开发语言：Java 17+<br>数据库：MySQL 8.0<br>缓存：Redis<br>搜索引擎：Elasticsearch<br>消息队列：Apache Kafka<br>文档解析：Apache Tika<br>容器化：Docker + Docker Compose<br>负载均衡：Nginx<br>监控：日志记录和性能监控<br>安全：HTTPS + JWT认证</p>
<h4 id="系统设计要点"><a href="#系统设计要点" class="headerlink" title="系统设计要点"></a>系统设计要点</h4><p>数据一致性是大多数系统面临的核心挑战，派聪明通过多层次的保障机制来确保数据在 MySQL、Elasticsearch 和 MinIO 三个存储系统中的一致性。我们为每个文件建立了完整的生命周期跟踪机制。</p>
<p>当文件上传到 MinIO 后，系统会在状态表中记录“已上传”状态；当文档被解析并索引到 Elasticsearch 时，状态更新为“已索引”；当向量化完成后，状态变为“处理完成”。</p>
<p>当用户删除文件时，系统会按照预定义的顺序依次清理 Elasticsearch 索引、MinIO 文件和 MySQL 记录。</p>
<p>派聪明采用了多层防护策略，JWT 身份认证作为第一道防线，提供无状态的用户身份验证机制。同时，令牌的过期机制和刷新策略，也能够最大程度确保用户身份的安全与登录体验。</p>
<p>基于角色的权限控制定义了用户、管理员等不同角色的基础权限边界，而组织标签权限则在此基础上实现了更细粒度的数据访问控制，让企业能够灵活地管理复杂的组织结构和权限需求。</p>
<p>数据隔离通过组织标签实现了多租户架构下的数据安全。每个文件和知识条目都会标记所属的组织标签，系统在所有数据访问点都会验证用户的组织标签权限。这种设计不仅保护了数据安全，还支持企业内部不同部门或项目的数据隔离需求。当文件上传、删除、权限变更时，也会记录日志，确保在出现异常时，能够第一时间追溯到问题。</p>
<h4 id="用户管理模块设计方案"><a href="#用户管理模块设计方案" class="headerlink" title="用户管理模块设计方案"></a>用户管理模块设计方案</h4><p>用户管理模块负责处理用户的注册、登录和权限控制功能。该模块的核心目标是：</p>
<p>确保用户身份的安全性。<br>提供灵活的权限管理机制，支持基于角色的访问控制，通过 RBAC 实现对不同角色（如普通用户和管理员）的功能权限区分，通过组织标签实现数据访问权限隔离。<br>为其他模块提供用户信息支持。<br>功能需求<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143547.png" alt="20251017143547"></p>
<p>技术选型<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143612.png" alt="20251017143612"></p>
<p><strong>关键流程:</strong></p>
<ol>
<li>用户注册流程</li>
</ol>
<ul>
<li>接收用户注册请求，验证用户名和密码；</li>
<li>检查用户名是否已存在；</li>
<li>使用 BCrypt 加密密码；</li>
<li>创建用户记录，设置默认角色为USER;</li>
<li>创建用户私人组织标签（PRIVATE_username）；</li>
<li>将私人组织标签设置为用户的主组织标签；返回注册成功响应。</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017143926.png" alt="20251017143926"></p>
<ol start="2">
<li>用户登录流程</li>
</ol>
<p>接收用户登录请求，获取用户名和密码；<br>查询用户记录并验证密码；加载用户组织标签信息；<br>生成包含用户信息和组织标签的 JWT Token；<br>返回登录成功响应和 Token。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017144159.png" alt="20251017144159"></p>
<ol start="3">
<li>组织标签管理流程</li>
</ol>
<p>管理员创建组织标签，设置标签名称和描述；<br>可选择设置父级组织标签（支持简单层级）；<br>管理员为用户分配组织标签；<br>系统自动保留用户的私人组织标签，确保其不被移除；<br>用户查看自己的组织标签。</p>
<ol start="4">
<li>权限验证流程</li>
</ol>
<p>解析请求头中的 JWT Token，验证有效性；<br>提取用户 ID、角色和组织标签信息；<br>对功能权限请求，根据用户角色判断是否允许访问；<br>对数据权限请求，根据用户组织标签判断是否可以访问特定资源；<br>允许或拒绝请求访问；权限验证流程具体讲解见：<a target="_blank" rel="noopener" href="https://www.yuque.com/itwanger/cxxbpw/aryz3rfpx0bm01vi">✅如何基于Spring Security实现RBAC？</a></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017144515.png" alt="20251017144515"></p>
<h4 id="RAG-项目文件上传解析模块设计方案"><a href="#RAG-项目文件上传解析模块设计方案" class="headerlink" title="RAG 项目文件上传解析模块设计方案"></a>RAG 项目文件上传解析模块设计方案</h4><p>文件上传与解析模块实现了<strong>大文件的分片上传、断点续传、文件合并以及文档解析功能</strong>。</p>
<p>通过 <code>Redis</code> 和 <code>MinIO</code> 的结合，确保大文件上传的可靠性；<br>并通过 Kafka 实现异步处理。<br>模块支持多种文档格式（PDF、Word、Excel）的解析，并提取文本内容用于后续向量化处理。<br>文本向量化通过调用豆包 API 实现，生成的向量数据目前存储在 Elasticsearch 中，未来将同时支持 FAISS 存储。</p>
<p><strong>核心功能设计</strong><br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017150442.png" alt="20251017150442"></p>
<p><strong>数据流转与存储设计</strong></p>
<p>文件从上传到向量化完成的完整流程：</p>
<p>客户端计算文件 MD5，发起上传请求→服务端验证文件是否已存在，返回分片策略<br>客户端根据策略分片上传文件<br>服务端接收分片，存入 MinIO 并更新 Redis 状态<br>所有分片上传完成后，触发合并操作<br>合并完成后发送解析任务到 Kafka→解析服务消费任务，根据文件类型选择相应解析器提取文本<br>文本分块后发送向量化任务到 Kafka→向量化服务消费任务，调用豆包 API 将文本转换为向量表示<br>向量数据写入 Elasticsearch 和预留 FAISS 接口→更新任务状态，通知用户处理完成</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017152605.png" alt="20251017152605"></p>
<p>01、MySQL<br>文件主表(file_upload)：存储文件元信息，如 MD5、名称、大小、状态</p>
<p>分片表(chunk_info)：记录每个分片的信息，包括索引、MD5、存储路径</p>
<p>解析结果表(document_vectors)：存储文本分块和向量化结果的元数据</p>
<p>02、Redis<br>使用 BitSet 记录已上传分片的位图（SETBIT命令）； 存储上传任务的临时状态和进度； 缓存热点文件的元数据，减轻数据库压力</p>
<p>03、MinIO<br>临时分片：存储上传的文件分片，路径结构为&#x2F;temp&#x2F;{fileMd5}&#x2F;{chunkIndex}</p>
<p>完整文件：合并后的文件存储在&#x2F;documents&#x2F;{userId}&#x2F;{fileName}</p>
<p>存储策略：实现热冷数据分离</p>
<p>04、 Elasticsearch<br>存储文本向量数据和原始文本内容，索引基于文件 MD5 和分块 ID 组织</p>
<p><strong>关键流程</strong></p>
<ol>
<li>分片上歘流程<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153506.png" alt="20251017153506"></li>
<li>文件合并流程<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153514.png" alt="20251017153514"></li>
<li>文档处理流程（合并解析和向量化）<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153520.png" alt="20251017153520"></li>
<li>文档删除流程<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017153525.png" alt="20251017153525"></li>
</ol>
<h4 id="RAG知识库检索模块设计方案"><a href="#RAG知识库检索模块设计方案" class="headerlink" title="RAG知识库检索模块设计方案"></a>RAG知识库检索模块设计方案</h4><p>知识库检索模块是派聪明这个 RAG 项目的核心功能模块，我们是基于 Elasticsearch 实现的文档混合检索能力，将语义检索和关键词检索结果结合起来，为用户提供更高质量的搜索体验。</p>
<p>该模块依赖于文件上传与解析模块完成的向量化处理，直接使用存储在 Elasticsearch 中的向量数据进行检索。系统目前使用豆包 API 生成文本向量，并将向量存储在 Elasticsearch 中。</p>
<p>模块整体分为两大块：</p>
<p>①、知识库检索</p>
<p>混合检索：结合语义检索和关键词检索结果，按权重排序返回搜索结果<br>支持指定返回结果数量：通过 topK 参数控制结果数量<br>②、权限控制</p>
<p>基于组织标签的数据权限：确保用户只能访问有权限的文档</p>
<p>支持层级权限验证：父标签权限自动包含所有子标签文档的访问权限</p>
<p>默认标签全局可访问：DEFAULT 标签资源对所有用户开放</p>
<p>用到的技术栈包括：<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017160520.png" alt="20251017160520"></p>
<p>整体的流程是这样的：<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017160827.png" alt="20251017160827"></p>
<p>当用户发起一个查询请求时，系统首先会接收用户输入的查询文本，以及一些附带的检索参数，以及需要返回的结果数量（topK）。在这一步，系统会先对这些参数做一轮合法性校验，确保格式正确、数据合理。</p>
<p>接着，系统会把用户的查询文本交给豆包提供的向量化 API，通过这个接口把自然语言的文本转换成可以用于向量检索的向量表示。这是我们后续进行语义匹配的基础。</p>
<p>拿到查询向量后，系统会执行一套混合检索流程，也就是结合语义匹配和关键词匹配。</p>
<p>在这一步，系统会构建一个 Elasticsearch 的查询语句，这个查询不仅包含了向量相似度的计算，还会结合全文搜索的匹配结果。同时，我们还会在查询中加入权限相关的过滤条件，确保用户只能看到自己“有权访问”的内容。</p>
<p>具体来说，权限控制主要分为三条规则：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span>	用户可以访问自己上传的文档；  </span><br><span class="line"><span class="bullet">2.</span>	用户可以访问被标记为公开的文档；  </span><br><span class="line"><span class="bullet">3.</span>	如果某些文档被打上了特定的权限标签（比如部门或层级权限），只要用户拥有这些标签，也可以访问这些文档。</span><br></pre></td></tr></table></figure>
<p>带着这些权限条件，系统将完整的查询请求发送给 Elasticsearch，并基于设定好的策略对搜索结果进行打分，综合评估文本的相关性与权限匹配度。</p>
<p>最后，我们会根据 topK 参数，挑选出排名靠前的若干个文档，并从数据库中进一步获取这些文档的元数据信息，比如标题、作者、上传时间等。系统会对这些内容进行格式化处理，打包成清晰完整的响应结果，并最终返回给用户。</p>
<p><strong>依赖的数据结构</strong><br>MySQL表结构<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162412.png" alt="20251017162412"><br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162421.png" alt="20251017162421"></p>
<p>Elasticsearch索引结构<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017162444.png" alt="20251017162444"></p>
<h4 id="RAG-系统的聊天助手模块设计方案"><a href="#RAG-系统的聊天助手模块设计方案" class="headerlink" title="RAG 系统的聊天助手模块设计方案"></a>RAG 系统的聊天助手模块设计方案</h4><p>聊天助手模块是派聪明系统的核心组件之一，承载了用户与系统之间的主要交互能力。</p>
<p>模块通过 WebSocket 协议实现双向通信，支持大语言模型（接入了 DeepSeek）输出内容的流式返回；为支持多轮连续对话，该模块集成了 Redis 用于存储和维护用户会话上下文，确保大模型在生成回答时能够“记住”前文内容，维持语义连贯性。</p>
<p>同时，模块深度集成了 Elasticsearch，可以为用户提供结构化文本的全文索引和关键词匹配，通过这套混合检索机制，派聪明能在海量本地知识中快速定位与用户问题相关的信息片段。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163634.png" alt="20251017163634"></p>
<p>为了更好地引导大语言模型生成高质量回答，系统特别强化了 Prompt 构建与模板管理能力：</p>
<p>根据检索结果动态生成 Prompt；<br>支持多种 Prompt 模板配置与调优；<br>确保内容组织清晰、有重点，引导模型围绕核心信息生成响应。<br>这一机制是实现 RAG 的关键保障，确保模型回答既有语义逻辑，又有知识依据。</p>
<p><strong>功能需求</strong><br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163705.png" alt="20251017163705"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163718.png" alt="20251017163718"></p>
<p><strong>关键流程</strong></p>
<ol>
<li>用户发起对话流程<br>当用户在页面上开始一次对话时，系统的第一步是由客户端主动发起一个 WebSocket 连接请求，这个请求里会带上用户的 JWT 身份认证信息。</li>
</ol>
<p>服务端收到请求后，会先验证用户的身份和权限，确认无误后，就会和客户端建立一个稳定的 WebSocket 长连接，用于后续的实时对话。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017163908.png" alt="20251017163908"></p>
<p>连接建立之后，用户可以开始提问了。客户端会把用户输入的问题通过 WebSocket 发给服务端。服务端这边接收到消息后，会先解析内容，然后根据情况获取一个当前的会话 ID，如果是新的对话，就创建一个。</p>
<p>接着系统会启动知识库检索流程。它会调用内部的 &#x2F;api&#x2F;search&#x2F;hybrid 接口，执行一轮“混合检索”，也就是结合关键词匹配和语义匹配的方式，快速从本地知识库中找出和用户问题最相关的文档。这些结果还会再经过筛选、排序，并提取出关键内容和出处信息，为后面生成回答做准备。</p>
<p>在拿到检索结果后，系统会开始构建 Prompt，也就是发送给大模型的提问模板。它会根据问题类型选择一个合适的 Prompt 模板，然后把刚刚检索到的内容填进去，同时还会加上一些系统级的指令或限制条件。这个过程中还会管理好上下文的长度，保证多轮对话的连贯性，最终生成一份结构化的 Prompt。</p>
<p>准备好 Prompt 之后，系统会把它发送给大语言模型的 API（比如 DeepSeek）。大模型会开始生成回答，系统这边则以流式的方式逐段接收内容。为了保证体验，还会处理模型返回中的异常或错误，比如超时、内容为空等问题。</p>
<p>生成内容后，系统会把这些文本切分成一段一段，再通过 WebSocket 实时地推送给客户端。这样用户就能一边看到内容一边继续等待剩下的生成，体验上就像在“实时对话”一样流畅。客户端也会一段段渲染这些返回的内容，提升整体交互体验。</p>
<p>最后，为了支持后续的上下文对话，系统会把当前这轮的用户提问和模型回答完整地存进 Redis 中，更新对话历史记录。同时也会设置或刷新这个会话的过期时间，以便未来再次使用或者进行归档。</p>
<ol start="2">
<li>新建会话流程</li>
</ol>
<p>当用户打开对话页面，准备开始一次新的交流时，客户端会先通过一个 REST 接口向服务端发送“创建会话”的请求。这时候，服务端首先会对用户的身份进行校验，确保这是一个合法登录的用户。</p>
<p>验证通过后，系统会为这次新对话生成一个全局唯一的 conversationId，用作这轮会话的身份标识。同时，会为这次对话准备一份空的历史记录结构，方便后续存储每轮提问和回答内容。</p>
<p>接下来，系统会在 Redis 里建立用户和这个会话 ID 之间的映射关系，也就是说：这个会话是属于哪个用户的。为了防止会话无限制增长，系统还会给这个会话设置一个过期时间，比如 24 小时或 7 天，超时后自动清理。</p>
<p>最后，系统会把新生成的 conversationId 返回给客户端，表示这轮对话已经正式创建成功，用户可以开始提问啦。</p>
<ol start="3">
<li>查询历史对话流程</li>
</ol>
<p>当用户想要查看之前的聊天记录时，客户端会向服务端发送一个查询历史记录的 REST 请求。服务端收到请求后，第一步还是先对用户的身份进行校验，确认用户是合法且有权限访问对应数据的。</p>
<p>接着，系统会去 Redis 中查找当前用户对应的 conversationId，也就是这位用户当前正在使用的那一轮对话的标识。如果 Redis 中没有查到，或者这条会话已经过期失效，系统会及时返回提示信息，避免出现无效请求。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;Map&lt;String, String&gt;&gt; <span class="title function_">getConversationHistory</span><span class="params">(String conversationId)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;conversation:&quot;</span> + conversationId;</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (json == <span class="literal">null</span>) &#123;</span><br><span class="line">            logger.debug(<span class="string">&quot;会话 &#123;&#125; 没有历史记录&quot;</span>, conversationId);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        List&lt;Map&lt;String, String&gt;&gt; history = objectMapper.readValue(json, <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;() &#123;&#125;);</span><br><span class="line">        logger.debug(<span class="string">&quot;读取到会话 &#123;&#125; 的 &#123;&#125; 条历史记录&quot;</span>, conversationId, history.size());</span><br><span class="line">        <span class="keyword">return</span> history;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">        logger.error(<span class="string">&quot;解析对话历史出错: &#123;&#125;, 会话ID: &#123;&#125;&quot;</span>, e.getMessage(), conversationId, e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果会话是有效的，那系统就会继续从 Redis 中读取这个会话对应的聊天历史记录，包括之前用户问过什么、系统是怎么回答的。这些内容会经过一轮格式化处理，比如按时间顺序排列、结构整理清晰，最后统一打包成接口返回数据发回给客户端，方便前端展示成对话列表，帮助用户快速回顾之前的交流内容。</p>
<p><strong>Redis 结构设计</strong></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20251017164145.png" alt="20251017164145"></p>
<h4 id="多维度权限过滤"><a href="#多维度权限过滤" class="headerlink" title="多维度权限过滤"></a>多维度权限过滤</h4><p><strong>工作内容：</strong></p>
<ul>
<li>设计基于组织标签的多级权限模型（RBAC），结合用户角色、组织归属和文件属性实现<strong>多维度权限过滤</strong>，覆盖 100% 敏感文档访问场景；</li>
</ul>
<h4 id="分片上传与端点续传技术"><a href="#分片上传与端点续传技术" class="headerlink" title="分片上传与端点续传技术"></a>分片上传与端点续传技术</h4><ul>
<li>采用<strong>分片上传与断点续传技术</strong>，结合 Redis 的 Bitmap 缓存文件状态、MinIO 存储文件内容，支持单文件最大 5GB 上传且失败重传率低于 0.3%；</li>
</ul>
<h4 id="语义向量-关键词混合检索引擎"><a href="#语义向量-关键词混合检索引擎" class="headerlink" title="语义向量+关键词混合检索引擎"></a>语义向量+关键词混合检索引擎</h4><ul>
<li>建立<strong>语义向量+关键词的混合检索引擎</strong>，基于 Elasticsearch 存储向量化数据，集成 rescore 重排优化结果并融合权限过滤，在 50 万条文档规模下检索延迟稳定在 300ms 内；</li>
</ul>
<h4 id="多轮上下文记忆"><a href="#多轮上下文记忆" class="headerlink" title="多轮上下文记忆"></a>多轮上下文记忆</h4><ul>
<li>实现<strong>多轮对话上下文记忆</strong>，结合 Redis 缓存与持久化机制支持会话断点恢复。</li>
</ul>
<h2 id="项目经验"><a href="#项目经验" class="headerlink" title="项目经验"></a>项目经验</h2><h3 id="TecHub"><a href="#TecHub" class="headerlink" title="TecHub"></a>TecHub</h3><p><strong>TecHub技术社区</strong><br><strong>项目描述：</strong> TecHub是一个前后端分离的用于技术分享交流的社区项目，包括前端PC和管理后台，用于帮助开发者交流和分享技术的社区平台。</p>
<h4 id="自动登录"><a href="#自动登录" class="headerlink" title="自动登录"></a>自动登录</h4><p><strong>工作内容：</strong> </p>
<ul>
<li>通过验证码和前端保持半长连接映射关系，当用户扫码关注公众号并输入验证码后，发起回调，识别用户信息并找到对应半长连接，实现系统<strong>自动登录</strong>；</li>
</ul>
<h4 id="ThreadLocal-上下文管理"><a href="#ThreadLocal-上下文管理" class="headerlink" title="ThreadLocal 上下文管理"></a>ThreadLocal 上下文管理</h4><ul>
<li>基于 <strong>ThreadLocal</strong> 在登录校验拦截器中封装线程隔离的全局上下文，以便在线程内部存储用户信息，减少用户信息的数据库查询次数；</li>
</ul>
<h4 id="全局异常处理策略"><a href="#全局异常处理策略" class="headerlink" title="全局异常处理策略"></a>全局异常处理策略</h4><ul>
<li>采用 HandleExceptionResolver 的<strong>全局异常处理策略</strong>，提高了代码的健壮性和可维护性，优化用户体验；</li>
</ul>
<h4 id="消息异步解耦"><a href="#消息异步解耦" class="headerlink" title="消息异步解耦"></a>消息异步解耦</h4><ul>
<li>将用户评论、点赞、收藏、系统消息发送到RabbitMQ，实现<strong>消息异步解耦</strong>，提升系统效率和服务稳定性。</li>
</ul>
<h3 id="MYDB"><a href="#MYDB" class="headerlink" title="MYDB"></a>MYDB</h3><p><strong>Java实现轻量级关系型数据库</strong><br><strong>项目描述：</strong> 独立设计与开发轻量级关系型数据库原型，涵盖<strong>存储引擎、事务控制、查询执行和网络通信模块</strong>，探索数据库核心机制在高并发与崩溃恢复场景下的实现与优化，旨在深入理解数据库底层运行原理和关键模块的协作关系。</p>
<p><strong>工作内容：</strong> </p>
<ul>
<li>设计基于** LRU 策略的页面缓存系统<strong>，结合</strong>引用计数**实现脏页异步回写，并集成 WAL 日志（Redo&#x2F;Undo 双日志），确保系统崩溃恢复后的 ACID 特性；</li>
<li>实现** MVCC 多版本并发控制**（版本链 + Read View），支持 RC&#x2F;RR 隔离级别；引入 Strict-2PL 锁协议和基于图的死锁检测算法，自动解决事务冲突；</li>
<li>构建** B+ 树索引**优化范围&#x2F;点查询性能，自研 SQL 词法解析器与语法树执行器，支持条件过滤与连接操作；</li>
<li>基于** Java NIO **完成数据文件的高效读写，降低磁盘 I&#x2F;O 延迟，提升存储引擎整体性能。</li>
</ul>
<h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><h3 id="项目-TecHub"><a href="#项目-TecHub" class="headerlink" title="项目-TecHub"></a>项目-TecHub</h3><h4 id="重要"><a href="#重要" class="headerlink" title="重要"></a>重要</h4><h5 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h5><p>TecHub是一个基于 Spring Boot、MyBatis-Plus、MySQL、Redis、ElasticSearch、MongoDB、Docker、RabbitMQ 等技术栈实现的一个知识分享社区系统。</p>
<p>这个系统旨在为创作者提供一个可以发布文章和教程，并赚取佣金的社区平台，同时又兼顾一些社交属性，比如说用户可以通过阅读、点赞、收藏、评论的形式和作者互动。</p>
<p>与此同时，为了紧跟时代潮流，该系统还为用户提供了一套基于 OpenAI、讯飞星火等多家大模型的派聪明 AI 助手，帮助用户在工作和学习中大幅提效。</p>
<h5 id="项目立意说一下，是否上线，上线考虑过用户数吗？"><a href="#项目立意说一下，是否上线，上线考虑过用户数吗？" class="headerlink" title="项目立意说一下，是否上线，上线考虑过用户数吗？"></a>项目立意说一下，是否上线，上线考虑过用户数吗？</h5><p>由于平常热爱技术分享，于是就萌生一个大胆的想法，做一个比 CSDN、掘金、知乎更厉害的内容社区，起名叫TecHub。</p>
<p>TecHub里面用到的都是互联网当下最流行的技术架构，骨架是通过 Spring Boot+Mybatis-Plus 搭建的，并且是前后端分离的，admin 端用的是 React + TypeScript，其中还用到了数据库 MySQL、缓存中间件 Redis、搜索引擎 ElasticSearch、nosql 数据库 MongoDB、容器化技术 Docker、消息中间件 RabbitMQ、权限安全框架 SpringSecurity、日志框架 Logback、 接口文档 Knife4j、及时消息通信 WebSocket 等技术栈，并且对接了当前最火热的 AI 大模型 OpenAI 和讯飞星火 API，项目支持一键启动和部署，这个过程让我的技术得到了极大的提升。</p>
<p>最近还对接了微信支付和支付宝支付，以及文章付费阅读的功能，感觉有一个属于自己的实战项目可以不断地迭代，锤炼自己的技术，这个过程还是蛮有意思的。</p>
<h5 id="具体的开发功能有哪些"><a href="#具体的开发功能有哪些" class="headerlink" title="具体的开发功能有哪些?"></a>具体的开发功能有哪些?</h5><p>1、整体前后端分离骨架的搭建，后端用的 Spring Boot+MyBatis-Plus+Redis+RabbitMQ，Admin 管理端用的 React，用户端用的 Thymeleaf。</p>
<p>2、使用 JWT + Session + Filter + AOP 完成用户登录和权限校验，支持微信扫码登录</p>
<p>3、作者使用 Markdown 发布教程、文章，图片会自动上传至 OSS 并使用 CDN 分发，用户可以点赞、收藏、评论，并且使用 RabbitMQ 进行异步消息处理</p>
<p>4、对接deepseek、讯飞星火、智谱 AI、字节豆包、阿里通义、OpenAI 等多家大模型，完成派聪明 AI 助手功能的开发，使用了策略模式和工厂模式，新增模型时非常简单，并通过 WebSocket 和 Stream 流实现及时通信和消息一点一点输出的效果</p>
<p>5、使用 Redis 实现作者白名单和用户活跃榜单，并且对热点数据进行缓存，为了提高缓存效率减轻 Redis 压力，还增加了本地缓存 Caffeine 作为二级缓存</p>
<p>6、借助 xxl-job 实现文章定时发布，ES 实现快速高效的文章查询等等。</p>
<h5 id="微信公众号自动登录"><a href="#微信公众号自动登录" class="headerlink" title="微信公众号自动登录"></a>微信公众号自动登录</h5><p>用户在前端点击登录时，会展示公众号二维码和待输入的验证码，并会和前端构建一个半长连接（相对于 WebSocket 的），同时保存验证码和半长连接之间的映射关系。</p>
<p>当用户向公众号发送验证码时，微信公众平台会将用户发送信息转发给技术派的服务器，然后通过验证码来识别请求登录的用户身份。</p>
<p>由于验证码保存了和半长链接的映射关系，所以可以找到该半长连接，实现用户的自动登录跳转。</p>
<h5 id="微信扫码登录"><a href="#微信扫码登录" class="headerlink" title="微信扫码登录"></a>微信扫码登录</h5><p>用户在 PC 网页端登录时，生成一个唯一的二维码，绑定请求端的身份信息，网页客户端和服务端保持链接，等待手机端扫描二维码获取授权 URL，微信端扫码登录成功后回调服务端接口（附带用户身份信息），并传回给应用服务器，完成登录。登录成功后，服务器生成一个 JWT 或 Session 并返回给 PC 端，用户完成登录。</p>
<h5 id="通过-RabbitMQ-实现消息异步解耦"><a href="#通过-RabbitMQ-实现消息异步解耦" class="headerlink" title="通过 RabbitMQ 实现消息异步解耦#"></a>通过 RabbitMQ 实现消息异步解耦#</h5><p><strong>首先说一下，为什么要异步解耦？</strong></p>
<p>当用户订阅、点赞、评论时，就会触发消息通知，如果当用户操作时，消息同步发送，当消息出现异常时，会影响主流程，或者当消息过多时，也会有影响服务的性能，所以需要对消息进行异步解耦。</p>
<p><strong>选择 RabbitMQ 的原因是什么呢？</strong></p>
<p>首先是社区活跃度高，然后 RabbitMQ 还提供了有一个易用的用户界面，可以让用户监控和管理消息，同时我们的系统对并发要求没有那么高，消息通知也可以无序，且 RabbitMQ 也支持消息路由，宕机后的消息也能自动恢复，所以就选择了 RabbitMQ。</p>
<p><strong>RabbitMQ 连接池用的什么阻塞队列？为什么？队列大小？怎么确定这个大小是合适的？</strong></p>
<p>使用的是 LinkedBlockingQueue，它是一个基于链表的阻塞队列。</p>
<p>LinkedBlockingQueue 的优点是锁分离，很适合生产和消费频率差不多的场景，这样生产和消费互不干涉的执行，能达到不错的效率。</p>
<p>队列大小生产环境是 10 个，因为我们是小型系统，通常设置在 10-50 个足够用了。可以通过监控队列的使用率、请求等待时间，和 RabbitMQ 的负载来动态调整，比如说 pool.size() &#x2F; poolSize 如果经常接近 100%，说明连接池偏小；如果请求经常阻塞等待连接，说明连接池偏小；如果 RabbitMQ 负载过高，说明连接池偏大。</p>
<h5 id="异常日志结合邮箱服务来实现异常报警"><a href="#异常日志结合邮箱服务来实现异常报警" class="headerlink" title="异常日志结合邮箱服务来实现异常报警"></a>异常日志结合邮箱服务来实现异常报警</h5><p>当程序出现大量的异常，表明应用多半出现了问题，需要立马发送给项目owner</p>
<p>要实现这个方案，关键点就在于异常出现的感知与上报:</p>
<ul>
<li>异常的捕获，并输出日志（这个感觉属于标配了吧，别告诉我现在还有应用不输出日志文件的…） </li>
<li><ul>
<li>对于这个感知，借助logback的扩展机制，可以实现，后面介绍</li>
</ul>
</li>
<li>异常上报：邮件发送</li>
</ul>
<ol>
<li>实现一个appender</li>
<li>然后在logback.xml中配置</li>
</ol>
<h5 id="※-技术派Mysql-Redis缓存一致性"><a href="#※-技术派Mysql-Redis缓存一致性" class="headerlink" title="※ 技术派Mysql&#x2F;Redis缓存一致性"></a>※ 技术派Mysql&#x2F;Redis缓存一致性</h5><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111511.png" alt="20250928111511"></p>
<p><strong>不好的方案:</strong></p>
<ol>
<li><p><strong>先写 MySQL，再写 Redis:</strong><br> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111625.png" alt="20250928111625"></p>
<ul>
<li>橘黄色的线是请求 A，黑色的线是请求 B；</li>
<li>橘黄色的文字，是 MySQL 和 Redis 最终不一致的数据；</li>
<li>数据是从 10 更新为 11；</li>
</ul>
<p> 请求 A、B 都是先写 MySQL，然后再写 Redis，在高并发情况下，如果请求 A 在写 Redis 时卡了一会，请求 B 已经依次完成数据的更新，就会出现图中的问题。</p>
<p> 不过这里有个前提，就是对于读请求，先去读 Redis，如果没有，再去读 DB，但是读请求不会再回写 Redis。 大白话说一下，就是读请求不会更新 Redis。</p>
</li>
<li><p><strong>先写 Redis，再写 MySQL:</strong></p>
<p> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928111844.png" alt="20250928111844"></p>
</li>
<li><p><strong>先删除 Redis，再写 MySQL:</strong><br> 这幅图和上面有些不一样，前面的请求 A 和 B 都是更新请求，这里的请求 A 是更新请求，但是请求 B 是读请求，且请求 B 的读请求会回写 Redis。<br> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928112028.png" alt="20250928112028"><br> 请求 A 先删除缓存，可能因为卡顿，数据一直没有更新到 MySQL，导致两者数据不一致。</p>
<p> 这种情况出现的概率比较大，因为请求 A 更新 MySQL 可能耗时会比较长，而请求 B 的前两步都是查询，会非常快。</p>
</li>
</ol>
<p><strong>好的方案:</strong></p>
<ol start="4">
<li><p><strong>先删除 Redis，再写 MySQL，再删除 Redis</strong><br> 对于“先删除 Redis，再写 MySQL”，如果要解决最后的不一致问题，其实再对 Redis 重新删除即可，这个也是大家常说的“缓存双删”。<br> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928112859.png" alt="20250928112859"></p>
<p> 为了便于大家看图，对于蓝色的文字，“删除缓存 10”必须在“回写缓存10”后面，那如何才能保证一定是在后面呢？网上给出的第一个方案是，让请求 A 的最后一次删除，等待 500ms。</p>
<p> 对于这种方案，看看就行，反正我是不会用，太 Low 了，风险也不可控。</p>
<p> <strong>建议异步串行化删除，即删除请求入队列</strong><br> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113414.png" alt="20250928113414"></p>
<p> 异步删除对线上业务无影响，串行化处理保障并发情况下正确删除。<br> 如果双删失败怎么办，网上有给 Redis 加一个缓存过期时间的方案，这个不敢苟同。个人建议整个重试机制，可以借助消息队列的重试机制，也可以自己整个表，记录重试次数，方法很多。</p>
<p> 简单小结一下：</p>
<ul>
<li>“缓存双删”不要用无脑的 sleep 500 ms；</li>
<li>通过消息队列的异步&amp;串行，实现最后一次缓存删除；</li>
<li>缓存删除失败，增加重试机制。</li>
</ul>
</li>
<li><p><strong>先写 MySQL，再删除 Redis</strong></p>
<p> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113620.png" alt="20250928113620"></p>
<p> 对于上面这种情况，对于第一次查询，请求 B 查询的数据是 10，但是 MySQL 的数据是 11，只存在这一次不一致的情况，对于不是强一致性要求的业务，可以容忍。（那什么情况下不能容忍呢，比如秒杀业务、库存服务等。）</p>
<p> 当请求 B 进行第二次查询时，因为没有命中 Redis，会重新查一次 DB，然后再回写到 Redis。</p>
<p> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113711.png" alt="20250928113711"><br> 这里需要满足 2 个条件：</p>
<ul>
<li>缓存刚好自动失效；</li>
<li>请求 B 从数据库查出 10，回写缓存的耗时，比请求 A 写数据库，并且删除缓存的还长。</li>
</ul>
<p> 对于第二个条件，我们都知道更新 DB 肯定比查询耗时要长，所以出现这个情况的概率很小，同时满足上述条件的情况更小。</p>
</li>
<li><p><strong>先写 MySQL，通过 Binlog，异步更新 Redis</strong><br> 这种方案，主要是监听 MySQL 的 Binlog，然后通过异步的方式，将数据更新到 Redis，这种方案有个前提，查询的请求，不会回写 Redis。<br> <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928113933.png" alt="20250928113933"><br> 这个方案，会保证 MySQL 和 Redis 的最终一致性，但是如果中途请求 B 需要查询数据，如果缓存无数据，就直接查 DB；如果缓存有数据，查询的数据也会存在不一致的情况。</p>
<p> 所以这个方案，是实现最终一致性的终极解决方案，但是不能保证实时性。</p>
</li>
</ol>
<p><strong>几种方案比较</strong></p>
<p>我们对比上面讨论的 6 种方案：</p>
<ol>
<li><p><strong>先写 Redis，再写 MySQL:</strong><br>这种方案，我肯定不会用，万一 DB 挂了，你把数据写到缓存，DB 无数据，这个是灾难性的；<br>我之前也见同学这么用过，如果写 DB 失败，对 Redis 进行逆操作，那如果逆操作失败呢，是不是还要搞个重试？</p>
</li>
<li><p><strong>先写 MySQL，再写 Redis:</strong></p>
</li>
</ol>
<p>对于并发量、一致性要求不高的项目，很多就是这么用的，我之前也经常这么搞，但是不建议这么做；<br>当 Redis 瞬间不可用的情况，需要报警出来，然后线下处理。</p>
<ol start="3">
<li><strong>先删除 Redis，再写 MySQL:</strong></li>
</ol>
<p>这种方式，我还真没用过，直接忽略吧。</p>
<ol start="4">
<li><p><strong>先删除 Redis，再写 MySQL，再删除 Redis:</strong><br>这种方式虽然可行，但是感觉好复杂，还要搞个消息队列去异步删除 Redis。</p>
</li>
<li><p><strong>先写 MySQL，再删除 Redis:</strong><br>比较推荐这种方式，删除 Redis 如果失败，可以再多重试几次，否则报警出来；<br>这个方案，是实时性中最好的方案，在一些高并发场景中，推荐这种。</p>
</li>
<li><p><strong>先写 MySQL，通过 Binlog，异步更新 Redis:</strong></p>
</li>
</ol>
<p>对于异地容灾、数据汇总等，建议会用这种方式，比如 binlog + kafka，数据的一致性也可以达到秒级；<br>纯粹的高并发场景，不建议用这种方案，比如抢购、秒杀等。</p>
<p><strong>个人结论：</strong></p>
<ul>
<li><p>实时一致性方案：采用“先写 MySQL，再删除 Redis”的策略，这种情况虽然也会存在两者不一致，但是需要满足的条件有点苛刻，所以是满足实时性条件下，能尽量满足一致性的最优解。</p>
</li>
<li><p>最终一致性方案：采用“先写 MySQL，通过 Binlog，异步更新 Redis”，可以通过 Binlog，结合消息队列异步更新 Redis，是最终一致性的最优解。</p>
</li>
</ul>
<h5 id="技术派canal实现MySQL和ES同步"><a href="#技术派canal实现MySQL和ES同步" class="headerlink" title="技术派canal实现MySQL和ES同步"></a>技术派canal实现MySQL和ES同步</h5><p>异步实现MySQL和ES同步.</p>
<p><code>Canal</code> 是一款常用的数据同步工具，其原理是基于 <code>Binlog</code> 订阅的方式实现，模拟一个 MySQL <code>Slave</code> 订阅 <code>Binlog</code> 日志，从而实现 CDC（Change Data Capture），将已提交的更改发送到下游。</p>
<p>主要流程如下：</p>
<ol>
<li><code>Canal</code> 服务端向 <code>MySQL</code> 的 master 节点传输 dump 协议；</li>
<li><code>MySQL</code> 的 master 节点接收到 dump 请求后推送 <code>Binlog</code> 日志给 <code>Canal</code> 服务端，解析 <code>Binlog</code> 对象（原始为 byte 流）转成 Json 格式；</li>
<li><code>Canal</code> 客户端通过 TCP 协议或 MQ 形式监听 <code>Canal</code> 服务端，同步数据到 ES。</li>
</ol>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928102815.png" alt="20250928102815"></p>
<p>下面是 <code>Canal</code> 执行的核心流程，其中 <code>Binlog Parser</code> 主要负责 <code>Binlog</code> 的提取、解析和推送，<code>EventSink</code> 负责数据的过滤 、路由和加工，仅作了解即可。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928102840.png" alt="20250928102840"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928104816.png" alt="20250928104816"></p>
<p>Canal Adapter 的 application.yml 配置文件可以配置 ES 地址，然后进行数据同步</p>
<h5 id="Redis分布式锁"><a href="#Redis分布式锁" class="headerlink" title="Redis分布式锁"></a>Redis分布式锁</h5><p><strong>本地锁和分布式锁区别:</strong><br><code>synchronized</code>和<code>Lock</code>锁；这两者都是本地锁。<br>何为本地锁呢？本地锁就是该锁只针对当前节点有效，也就是当node A获取锁时，那么node B同样还可以获取锁，这种情况就是本地锁。<br>如果服务只部署了一个节点的话，用这种本地锁是没有问题的。<br>现现在很多系统为了抗高并发、高可用和高性能，会部署多节点(集群部署)，那么此时如果还用本地锁的话就会出现问题，因此分布式锁就诞生了。<br>分布式锁就是当有一个节点获取到锁后，其它节点是不可以获取锁的。</p>
<p><strong>Redis分布式锁和Zookeeper分布式锁区别:</strong></p>
<p>谈起分布式集群，就绕不开CAP理论，也就是<code>强一致性</code>、<code>可用性</code>和<code>分区容错性</code>。三者只能选其二，不可兼容。这里我就不具体分析其原因之类了，直接步入两把分布式锁区别。</p>
<p><code>Redis分布式锁</code>：它追求的高可用性和分区容错性。Redis在追求高可用性时会在 Redis 写入主节点数据后，立即返回成功，不关心异步主节点同步从节点数据是否成功。Redis是基于内存的，性能极高，官方给的指标是每秒可达到10W的吞吐量。</p>
<p><code>Zookeeper分布式锁</code>：它追求的是强一致性和分区容错性。Zookeeper在写入主节点数据后会等到从节点同步完数据成后才会返回成功。为了数据的强一致性牺牲了一部分可用性。</p>
<p>两者综合对比下来，技术派为了追求用户体验度，就采用了<code>Redis分布式锁</code>来实现。</p>
<p><strong>使用Redis分布式锁背景:</strong></p>
<p>技术派使用Redis分布式锁的背景是，用户根据articleId查询文章详情，查询出结果后返回。</p>
<p>查询文章详情流程图如下所示：<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142525.png" alt="20250928142525"></p>
<p>如果并发量不是特别高的情况下没有问题，但就怕并发量高；会出现什么问题呢？什么时候出现呢？</p>
<p>当缓存中没有数据，需要到MySQL中查询这一步。</p>
<p>问题出现点如下所示：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142615.png" alt="20250928142615"></p>
<p>因为当高并发时，如果查询缓存中没有数据，大量的用户会同时去访问DB层MySQL，MySQL的资源是非常珍贵的，并且性能没有Redis好，很容易将我们的MySQL打宕机，进而影响整个服务。</p>
<p>针对这种问题，该怎么解决呢？</p>
<p>当大量用户同时访问同一篇文章时，只允许一个用户去MySQL中获取数据。由于服务是集群化部署，就需要用到Redis分布式锁。</p>
<p>逻辑如下所示：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142724.png" alt="20250928142724"></p>
<p>采用加锁的方式就能很好地保护DB层数据库，进而保证系统的高可用性。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928142746.png" alt="20250928142746"></p>
<p><strong>Redis分布式锁的实现方式</strong></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928144651.png" alt="20250928144651"></p>
<p>这样的是实现方式,可以在执行完当前业务后直接释放锁,并且如果当执行的过程中节点挂了,锁也会自动释放.</p>
<p>但是这样也存在一个问题,就是当执行完业务后,锁会自动释放,为了防止执行的过程中节点挂了.所以需要通过设置过期时间,锁也会自动释放.<br>并且通过设置value,可以防止锁被其他节点误删.</p>
<p>但是还存在一个问题就是,过期时间该如何设置呢?</p>
<ul>
<li>时间设置过短：可能业务还没有执行完毕，过期时间已经到了，锁被释放，其他线程可以拿到锁去访问DB，违背了我们的初心。</li>
<li>时间设置过长：过长的话，可能在我们加锁成功后，还没有执行到释放锁，在这一段过程中节点宕机了，那么在锁未过期的这段时间，其他线程是不能获取锁的，这样也不好。</li>
</ul>
<p>针对这个问题，可以写一个<strong>守护线程</strong>，然后每隔固定时间去查看业务是否执行完毕，如果没有的话就延长其过期时间，也就是为锁续期；</p>
<p>上面俗称<strong>看门狗机制</strong>，且已经有技术实现——<code>Redission</code>。<br>下面我就详细讲解下<code>Redission</code> 实现分布式锁的逻辑。</p>
<h5 id="Redission实现分布式锁"><a href="#Redission实现分布式锁" class="headerlink" title="Redission实现分布式锁"></a>Redission实现分布式锁</h5><p>redission实现分布式锁流程图：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928145424.png" alt="20250928145424"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250928161322.png" alt="20250928161322"></p>
<h4 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h4><h5 id="设计模式-抽象设计模式"><a href="#设计模式-抽象设计模式" class="headerlink" title="设计模式 抽象设计模式"></a>设计模式 抽象设计模式</h5><p>抽象设计模式包括了多种设计模式，例如工厂模式、观察者模式、策略模式等。这些设计模式通过定义一组通用的类和接口，并指导如何将它们组合起来以解决特定问题。它们帮助开发者遵循设计原则，如开闭原则、单一职责原则等，从而产生高质量的、可重用的代码。</p>
<p>核心思想：抽象出事物的共同点，封装成接口或抽象类，让子类实现具体的行为。</p>
<h5 id="设计模式-策略模式"><a href="#设计模式-策略模式" class="headerlink" title="设计模式 策略模式"></a>设计模式 策略模式</h5><p>策略模式（Strategy Pattern）是一种行为型设计模式，它定义了一系列的算法，将每个算法封装起来，使得它们可以相互替换。策略模式让算法的变化独立于使用它的客户端。</p>
<p>在策略模式中，有三个角色：上下文（Context）、策略（Strategy）和具体策略（ConcreteStrategy）。</p>
<p>上下文（Context）类持有一个策略对象，并在需要执行算法时调用策略对象的方法。上下文类不关心具体的算法实现，只关心调用合适的策略对象。</p>
<p>策略（Strategy）接口定义了算法的方法，具体的策略类实现了该接口，提供了不同的算法实现。</p>
<p>具体策略（ConcreteStrategy）类是策略的具体实现，封装了不同的算法实现。</p>
<p>策略模式的优点是：</p>
<ol>
<li><p>策略模式将算法的定义和使用分离，使得算法可以独立于使用它的客户端进行变化和演化。</p>
</li>
<li><p>策略模式可以方便地扩展和添加新的算法，只需要实现新的具体策略类即可，无需修改上下文类。</p>
</li>
<li><p>策略模式可以减少大量的条件判断语句，提高代码的可读性和可维护性。</p>
</li>
</ol>
<p>策略模式的缺点是：</p>
<ol>
<li><p>客户端需要了解不同的策略类，选择合适的策略对象，增加了客户端的复杂性。</p>
</li>
<li><p>策略模式增加了对象的数量，每个具体策略类都需要一个独立的对象，导致系统中对象数量增加。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 定义策略接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 具体策略实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddStrategy</span> <span class="keyword">implements</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubtractStrategy</span> <span class="keyword">implements</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MultiplyStrategy</span> <span class="keyword">implements</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a * b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 上下文类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Strategy strategy;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStrategy</span><span class="params">(Strategy strategy)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strategy = strategy;  <span class="comment">// 关键：保存策略实例</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">executeStrategy</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> strategy.execute(a, b);  <span class="comment">// 关键：调用当前策略</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 客户端代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置加法策略</span></span><br><span class="line">        context.setStrategy(<span class="keyword">new</span> <span class="title class_">AddStrategy</span>());</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> context.executeStrategy(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;加法结果:&quot;</span> + result);  <span class="comment">// 输出：8</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置减法策略</span></span><br><span class="line">        context.setStrategy(<span class="keyword">new</span> <span class="title class_">SubtractStrategy</span>());</span><br><span class="line">        result = context.executeStrategy(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;减法结果:&quot;</span> + result);  <span class="comment">// 输出：2</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置乘法策略</span></span><br><span class="line">        context.setStrategy(<span class="keyword">new</span> <span class="title class_">MultiplyStrategy</span>());</span><br><span class="line">        result = context.executeStrategy(<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;乘法结果:&quot;</span> + result);  <span class="comment">// 输出：15</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="自定义配置注入-动态刷新"><a href="#自定义配置注入-动态刷新" class="headerlink" title="自定义配置注入&amp;动态刷新"></a>自定义配置注入&amp;动态刷新</h5><p>一般我们的配置信息都是放在配置文件application.yml中.<br>然后SpringBoot就会自动加载配置文件中的信息到Environment中，再应用中访问这些配置也比较简单，常见的有@Value, @ConfigurationProperties 以及 environment.getProperty.</p>
<p>SpringBoot应用中的配置读取简单，但是这些配置是<strong>不支持动态刷新</strong>的</p>
<p>本项目开发了一个对单体应用而言，非常实用的配置扩展，支持从自定义的数据源（MySQL）中获取配置，并注入到Environment中，且优先级最高，同时也需要支持配置的动态刷新</p>
<p><strong>自定义数据源</strong><br>我们将自定义的配置存在数据库中，核心的字段就是配置的key, value</p>
<p>技术派中设计了一个非常简单的全局配置表 <code>global_conf</code><br>(还可以加上version和namespace作为拓展)</p>
<p><strong>数据的加载</strong></p>
<ol>
<li>首先加载配置数据到内存</li>
<li>将配置注册到Environment中</li>
</ol>
<h5 id="敏感词过滤技术"><a href="#敏感词过滤技术" class="headerlink" title="敏感词过滤技术"></a>敏感词过滤技术</h5><ol>
<li>敏感词校验算法：DFA(Deterministic Finite Automaton)<br>DFA 是一种状态机，用于识别字符串中的敏感词。</li>
<li>一种基于mybatis拦截器的自定义数据库脱敏的技术方案.</li>
</ol>
<p>相当于在数据库中维护一个敏感词表，然后通过DFA算法进行敏感词校验。</p>
<h5 id="Hikari-连接池"><a href="#Hikari-连接池" class="headerlink" title="Hikari 连接池"></a>Hikari 连接池</h5><p>Hikari 作为 SpringBoot2.0 默认的连接池，在业界得到了普遍的认可，对于大部分业务场景，都可以实现快速高效的连接使用。</p>

<div class="article-footer slide-up fs14">
    <section id="license">
      <div class="header"><span>许可协议</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    </div>
</article>
<div class="related-wrap slide-up" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2025/09/25/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B025%E5%B9%B49%E6%9C%88/2025.9.25%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">2025.9.25学习日记</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2025/09/24/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B025%E5%B9%B49%E6%9C%88/2025.9.24%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">2025.9.24学习日记</a></div></section></div>







<footer class="page-footer slide-up footnote"><hr><div class="text"><p>本站由 <a href="/">JakicDong</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.30.0">Stellar 1.30.0</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper slide-up toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%93%E4%B8%9A%E6%8A%80%E8%83%BD"><span class="toc-text">专业技能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java%E5%9F%BA%E7%A1%80"><span class="toc-text">Java基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%AE%B9%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">常见容器的实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ArrayList"><span class="toc-text">ArrayList</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LinkedList"><span class="toc-text">LinkedList</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HashMap"><span class="toc-text">HashMap</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3"><span class="toc-text">面向对象编程思想</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM"><span class="toc-text">JVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JUC"><span class="toc-text">JUC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL"><span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis"><span class="toc-text">Redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6"><span class="toc-text">框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80"><span class="toc-text">计算机基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%B9%A0%E7%BB%8F%E5%8E%86"><span class="toc-text">实习经历</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE-RAG"><span class="toc-text">项目-RAG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E4%BD%A0%E7%9A%84RAG%E9%A1%B9%E7%9B%AE"><span class="toc-text">介绍一下你的RAG项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAG%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88"><span class="toc-text">RAG整体设计方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">业务架构设计</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%B1%82"><span class="toc-text">用户层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">逻辑层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B1%82"><span class="toc-text">数据层</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1"><span class="toc-text">业务流程设计</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E5%90%91%E9%87%8F"><span class="toc-text">文档向量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E7%B4%A2"><span class="toc-text">知识检索</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%81%8A%E5%A4%A9%E5%8A%A9%E6%89%8B"><span class="toc-text">聊天助手</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">权限管理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">技术架构设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E8%A6%81%E7%82%B9"><span class="toc-text">系统设计要点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88"><span class="toc-text">用户管理模块设计方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAG-%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88"><span class="toc-text">RAG 项目文件上传解析模块设计方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAG%E7%9F%A5%E8%AF%86%E5%BA%93%E6%A3%80%E7%B4%A2%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88"><span class="toc-text">RAG知识库检索模块设计方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAG-%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%81%8A%E5%A4%A9%E5%8A%A9%E6%89%8B%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%A1%88"><span class="toc-text">RAG 系统的聊天助手模块设计方案</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%BB%B4%E5%BA%A6%E6%9D%83%E9%99%90%E8%BF%87%E6%BB%A4"><span class="toc-text">多维度权限过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E4%B8%8E%E7%AB%AF%E7%82%B9%E7%BB%AD%E4%BC%A0%E6%8A%80%E6%9C%AF"><span class="toc-text">分片上传与端点续传技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E4%B9%89%E5%90%91%E9%87%8F-%E5%85%B3%E9%94%AE%E8%AF%8D%E6%B7%B7%E5%90%88%E6%A3%80%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-text">语义向量+关键词混合检索引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E8%BD%AE%E4%B8%8A%E4%B8%8B%E6%96%87%E8%AE%B0%E5%BF%86"><span class="toc-text">多轮上下文记忆</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C"><span class="toc-text">项目经验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TecHub"><span class="toc-text">TecHub</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95"><span class="toc-text">自动登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThreadLocal-%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86"><span class="toc-text">ThreadLocal 上下文管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5"><span class="toc-text">全局异常处理策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E5%BC%82%E6%AD%A5%E8%A7%A3%E8%80%A6"><span class="toc-text">消息异步解耦</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MYDB"><span class="toc-text">MYDB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE"><span class="toc-text">项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE-TecHub"><span class="toc-text">项目-TecHub</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E8%A6%81"><span class="toc-text">重要</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">项目介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%AB%8B%E6%84%8F%E8%AF%B4%E4%B8%80%E4%B8%8B%EF%BC%8C%E6%98%AF%E5%90%A6%E4%B8%8A%E7%BA%BF%EF%BC%8C%E4%B8%8A%E7%BA%BF%E8%80%83%E8%99%91%E8%BF%87%E7%94%A8%E6%88%B7%E6%95%B0%E5%90%97%EF%BC%9F"><span class="toc-text">项目立意说一下，是否上线，上线考虑过用户数吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E7%9A%84%E5%BC%80%E5%8F%91%E5%8A%9F%E8%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">具体的开发功能有哪些?</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95"><span class="toc-text">微信公众号自动登录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95"><span class="toc-text">微信扫码登录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-RabbitMQ-%E5%AE%9E%E7%8E%B0%E6%B6%88%E6%81%AF%E5%BC%82%E6%AD%A5%E8%A7%A3%E8%80%A6"><span class="toc-text">通过 RabbitMQ 实现消息异步解耦#</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E6%97%A5%E5%BF%97%E7%BB%93%E5%90%88%E9%82%AE%E7%AE%B1%E6%9C%8D%E5%8A%A1%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E6%8A%A5%E8%AD%A6"><span class="toc-text">异常日志结合邮箱服务来实现异常报警</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%BB-%E6%8A%80%E6%9C%AF%E6%B4%BEMysql-Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-text">※ 技术派Mysql&#x2F;Redis缓存一致性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%B4%BEcanal%E5%AE%9E%E7%8E%B0MySQL%E5%92%8CES%E5%90%8C%E6%AD%A5"><span class="toc-text">技术派canal实现MySQL和ES同步</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-text">Redis分布式锁</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Redission%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-text">Redission实现分布式锁</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%82%E9%A1%B9"><span class="toc-text">杂项</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%8A%BD%E8%B1%A1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">设计模式 抽象设计模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-text">设计模式 策略模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%B3%A8%E5%85%A5-%E5%8A%A8%E6%80%81%E5%88%B7%E6%96%B0"><span class="toc-text">自定义配置注入&amp;动态刷新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E8%AF%8D%E8%BF%87%E6%BB%A4%E6%8A%80%E6%9C%AF"><span class="toc-text">敏感词过滤技术</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Hikari-%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">Hikari 连接池</span></a></li></ol></li></ol></li></ol></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
    tag_plugins: {
      chat: Object.assign({"api":"https://siteinfo.listentothewind.cn/api/v1"}),
    }
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"skip_search":null,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js`,
    marked: `https://cdn.jsdelivr.net/npm/marked@13.0.1/lib/marked.umd.min.js`
  }
  

</script>

<script type="text/javascript">
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = () => {
          utils.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) => {
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index, 1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }

  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')) {
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function () {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },

    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function (response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function (data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function (error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
    /********************** requestAnimationFrame ********************************/
    // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
    // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
    requestAnimationFrame: (fn) => {
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
      }
      window.requestAnimationFrame(fn)
    },
    dark: {},
  };

  // utils.dark.mode 当前模式 dark or light
  // utils.dark.toggle() 暗黑模式触发器
  // utils.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  utils.dark.method = {
    toggle: new RunItem(),
  };
  utils.dark = Object.assign(utils.dark, {
    push: utils.dark.method.toggle.push,
  });
</script>
<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.30.0" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)
    utils.dark.mode = newTheme === 'auto' ? (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light") : newTheme;
    utils.dark.method.toggle.start();

    const messages = {
      light: `切换到浅色模式`,
      dark: `切换到深色模式`,
      auto: `切换到跟随系统配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    } else {
      utils.dark.mode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    utils.dark.method.toggle.start();
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"friends_and_posts":{"js":"/js/services/friends_and_posts.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"},"voice":{"js":"/js/plugins/voice.js"},"video":{"js":"/js/plugins/video.js"},"download-file":{"js":"/js/plugins/download-file.js"},"twikoo":{"js":"/js/services/twikoo_latest_comment.js"},"waline":{"js":"/js/services/waline_latest_comment.js"},"artalk":{"js":"/js/services/artalk_latest_comment.js"},"giscus":{"js":"/js/services/giscus_latest_comment.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else if (id == 'voice') {
        ctx.voiceAudios = document.querySelectorAll('.voice>audio');
        if (ctx.voiceAudios?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            createVoiceDom(ctx.voiceAudios);
          });
        }
      } else if (id == 'video') {
        ctx.videos = document.querySelectorAll('.video>video');
        if (ctx.videos?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            videoEvents(ctx.videos);
          });
        }
      } else if (id == 'download-file') {
        ctx.files = document.querySelectorAll('.file');
        if (ctx.files?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            downloadFileEvent(ctx.files);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }

    // chat iphone time
    let phoneTimes = document.querySelectorAll('.chat .status-bar .time');

    if (phoneTimes.length > 0) {
      NowTime();
      var date = new Date();
      var sec = date.getSeconds();
      var firstAdjustInterval = setInterval(firstAdjustTime, 1000 * (60 - sec));
    }

    function firstAdjustTime() {
      NowTime();
      clearInterval(firstAdjustInterval);
      setInterval(NowTime, 1000 * 60);
    }

    function NowTime() {
      for (let i = 0; i < phoneTimes.length; ++i) {
        var timeSpan = phoneTimes[i];
        var date = new Date();
        var hour = date.getHours();
        var min = date.getMinutes();
        timeSpan.innerHTML = check(hour) + ":" + check(min);
      }
    };

    function check(val) {
      if (val < 10) {
        return ("0" + val);
      }
      return (val);
    }

    // chat quote
    const chat_quote_obverser = new IntersectionObserver((entries, observer) => {
      entries.filter((entry) => { return entry.isIntersecting }).sort((a, b) => a.intersectionRect.y !== b.intersectionRect.y ? a.intersectionRect.y - b.intersectionRect.y : a.intersectionRect.x - b.intersectionRect.x).forEach((entry, index) => {
          observer.unobserve(entry.target);
          setTimeout(() => {
            entry.target.classList.add('quote-blink');
            setTimeout(() => {
              entry.target.classList.remove('quote-blink');
            }, 1000);
          }, Math.max(100, 16) * (index + 1));
        });
    });

    var chatQuotes = document.querySelectorAll(".chat .talk .quote");
    chatQuotes.forEach((quote) => {
      quote.addEventListener('click', function () {
        var chatCellDom = document.getElementById("quote-" + quote.getAttribute("quotedCellTag"));
        if (chatCellDom) {
          var chatDiv = chatCellDom.parentElement;
          var mid = chatDiv.clientHeight / 2;
          var offsetTop = chatCellDom.offsetTop;
          if (offsetTop > mid - chatCellDom.clientHeight / 2) {
            chatDiv.scrollTo({
              top: chatCellDom.offsetTop - mid + chatCellDom.clientHeight / 2,
              behavior: "smooth"
            });
          } else {
            chatDiv.scrollTo({
              top: 0,
              behavior: "smooth"
            });
          }
          chat_quote_obverser.observe(chatCellDom);
        }
      });
    });
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.1.3/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script defer src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const slideUp = {
      distance: `16px`,
      duration: `800`,
      interval: `100`,
      scale: `1`,
      opacity: 0,
      easing: "ease-out"
    };
    ScrollReveal().reveal('.l_left .slide-up', slideUp);
    ScrollReveal().reveal('.l_main .slide-up', slideUp);
    ScrollReveal().reveal('.l_right .slide-up', slideUp);
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script src="/js/check-in.js"></script></div></body></html>
