{"layout":"notes","date":"2025-06-11T00:00:00.000Z","posts":[{"title":"3DGS-Ubuntu环境.md","path":"2025/06/11/3DGS/3DGS-Ubuntu环境/","excerpt":"","date":"2025-06-10T16:00:00.000Z","tags":["3DGS","公司"],"content":"<p>环境:Ubuntu20.04和Win11双系统<br>CUDA11.8<br>Anacoda3</p>\n<p>安装clash for linux 快捷命令 clashtun on &#x2F; off</p>\n<p>anaconda:<br>source conda activate 虚拟环境名</p>\n"},{"title":"3DGS学习笔记","path":"2025/06/11/3DGS/3DGS学习笔记/","excerpt":"","date":"2025-06-10T16:00:00.000Z","tags":["3DGS","公司"],"content":"<h2 id=\"环境配置\"><a href=\"#环境配置\" class=\"headerlink\" title=\"环境配置\"></a>环境配置</h2><p><a href=\"https://www.youtube.com/watch?v=UXtuigy_wYc\">https://www.youtube.com/watch?v=UXtuigy_wYc</a> youtube复现视频<br><a href=\"https://github.com/graphdeco-inria/gaussian-splatting\">https://github.com/graphdeco-inria/gaussian-splatting</a> 3DGS的github源码地址<br><a href=\"https://dl.acm.org/doi/10.1145/3592433\">https://dl.acm.org/doi/10.1145/3592433</a> 论文地址<br><a href=\"https://arxiv.org/abs/2308.04079\">https://arxiv.org/abs/2308.04079</a></p>\n<h3 id=\"下载依赖和环境\"><a href=\"#下载依赖和环境\" class=\"headerlink\" title=\"下载依赖和环境\"></a>下载依赖和环境</h3><p>视频老哥的github地址<br><a href=\"https://github.com/jonstephens85/gaussian-splatting-Windows\">https://github.com/jonstephens85/gaussian-splatting-Windows</a></p>\n<h3 id=\"下载git-跳过\"><a href=\"#下载git-跳过\" class=\"headerlink\" title=\"下载git(跳过)\"></a>下载git(跳过)</h3><p>测试是否下载git –version</p>\n<h3 id=\"下载anaconda-跳过\"><a href=\"#下载anaconda-跳过\" class=\"headerlink\" title=\"下载anaconda(跳过)\"></a>下载anaconda(跳过)</h3><h3 id=\"下载CUDA-nvcc-–version测试版本\"><a href=\"#下载CUDA-nvcc-–version测试版本\" class=\"headerlink\" title=\"下载CUDA :nvcc –version测试版本\"></a>下载CUDA :nvcc –version测试版本</h3><p>nvidia-smi确定电脑最高支持的CUDA版本 ,我的最高支持12.8</p>\n<h3 id=\"准备下载CUDA-11-8版本\"><a href=\"#准备下载CUDA-11-8版本\" class=\"headerlink\" title=\"准备下载CUDA 11.8版本\"></a>准备下载CUDA 11.8版本</h3><h3 id=\"安装vs2019\"><a href=\"#安装vs2019\" class=\"headerlink\" title=\"安装vs2019\"></a>安装vs2019</h3><p>官方下载地址：<a href=\"https://visualstudio.microsoft.com/zh-hans/vs/older-downloads/\">https://visualstudio.microsoft.com/zh-hans/vs/older-downloads/</a></p>\n<h3 id=\"下载colmap\"><a href=\"#下载colmap\" class=\"headerlink\" title=\"下载colmap\"></a>下载colmap</h3><h3 id=\"准备编译\"><a href=\"#准备编译\" class=\"headerlink\" title=\"准备编译\"></a>准备编译</h3><p>打开anaconda prompt</p>\n<p>D: 切换D盘<br>D:\\user\\desktop\\workplace\\3DGS\\userdesktopworkplace3DGS </p>\n<p>要将 Anaconda 创建的虚拟环境设置在 D 盘，可以按照以下步骤操作：</p>\n<ol>\n<li>修改 Anaconda 配置<br>首先，需要修改 Anaconda 的配置，使其将环境创建在指定路径。<br>在 Anaconda Prompt 中执行以下命令：<br>conda config –add envs_dirs D:\\Anaconda\\envs<br>（如果需要，将 D:\\Anaconda\\envs 替换为你想要的路径）</li>\n<li>确保路径存在<br>确保你指定的路径已经存在。如果不存在，请手动创建该文件夹。</li>\n<li>创建虚拟环境<br>现在你就可以创建虚拟环境，新的环境将被创建在 D 盘的指定路径下：<br>conda create –name env_name python&#x3D;3.x</li>\n<li>检查环境位置<br>可以使用以下命令查看虚拟环境的位置：<br>conda info –envs<br>经过以上步骤后，你的虚拟环境将会在 D 盘创建。<br>conda create -n gaussian_splatting python&#x3D;3.7<br>conda activate gaussian_splatting<br>conda install -c conda-forge vs2019_win-64<br>pip install torch&#x3D;&#x3D;1.13.1+cu117 torchvision&#x3D;&#x3D;0.14.1+cu117 torchaudio&#x3D;&#x3D;0.13.1 –extra-index-url <a href=\"https://download.pytorch.org/whl/cu117\">https://download.pytorch.org/whl/cu117</a><br>pip install submodules&#x2F;diff-gaussian-rasterization<br>pip install submodules&#x2F;simple-knn<br>pip install submodules&#x2F;fused-ssim</li>\n</ol>\n<h2 id=\"训练\"><a href=\"#训练\" class=\"headerlink\" title=\"训练\"></a>训练</h2><h3 id=\"3dgs的运行训练\"><a href=\"#3dgs的运行训练\" class=\"headerlink\" title=\"3dgs的运行训练\"></a>3dgs的运行训练</h3><p>下述所有命令都是在终端里运行的，运行时保持是从gaussian-splatting目录下开始输入的。<br>省流版本:<br><code>conda activate gaussian_splatting</code><br><code>d:</code><br><code>cd D:\\sys\\Desktop\\Workplace\\3DGS</code><strong>新的路径</strong><br>训练:<br><code>python train.py -s data_train -m data_train/output</code> (参数为输出地址)<br><code>python render.py -m data_train/output</code><br>把train文件夹的method复制到test文件夹<br><code>python metrics.py -m data_train/output</code></p>\n<h3 id=\"1-视频截取帧\"><a href=\"#1-视频截取帧\" class=\"headerlink\" title=\"1.视频截取帧\"></a>1.视频截取帧</h3><p>这里可以用自己手机拍摄的一段视频，一两分钟即可，可以参考一下作者的训练时间，作者用自己的笔记本（4060 8G），大概训练了两个小时左右，跑完了所有的迭代。</p>\n<p>在gaussian-splatting目录下新建一个data文件夹，将你拍摄的视频移动到该data文件夹下，并将你的视频改名为input，后缀.mp4不用改。然后在data文件夹里再建一个与视频同名的文件夹，名字也是input。然后就可以输入命令啦（终端里从gaussian-splatting&#x2F;data目录下开始输入）</p>\n<p><code>cd data</code></p>\n<p><code>ffmpeg -i input.mp4 -vf &quot;setpts=0.2*PTS&quot; input\\input_%04d.jpg   </code>         #推荐运行这个指令</p>\n<p><code>ffmpeg -i input.mp4 -vf &quot;setpts=0.2*PTS,fps=1&quot; input\\input_%04d.jpg</code> #如果需要调整抽帧频率可以参考这个指令。选择一个运行即可</p>\n<p>这里简单的说一下各个参数的含义。<br>setpts&#x3D;0.2*PTS 将视频播放速度加快到原来的 5 倍。这意味着原视频的每秒帧数增加到 5 倍。<br>如果原始视频是 30 FPS，加速后的视频将以 150 FPS 播放。<br>尽管视频播放速度加快了，ffmpeg  fps&#x3D;1 会以每秒一帧的频率提取图片。<br> 这样就可以把你的视频截取为帧并保存在input文件夹里，在input文件夹里应该可以看到许多张照片。</p>\n<h3 id=\"2-产生点云\"><a href=\"#2-产生点云\" class=\"headerlink\" title=\"2.产生点云\"></a>2.产生点云</h3><p>在终端gaussian-splatting目录下输入<br>cd ..<br>python convert.py -s data</p>\n<p> 这个就是利用安装的colmap产生点云，会花费一些时间，等待完成即可。</p>\n<h3 id=\"3-查看点云\"><a href=\"#3-查看点云\" class=\"headerlink\" title=\"3.查看点云\"></a>3.查看点云</h3><p>终端里输入</p>\n<p>colmap</p>\n<p> 调出来colmap后，选择file-&gt;import model<br>然后选择gaussian-splatting&#x2F;data&#x2F;sparse&#x2F;0文件夹，选择确定，即可打开生成的点云，遇到弹窗×掉即可。可以看到生成的点云还有相机路径。</p>\n<h3 id=\"4-开始训练\"><a href=\"#4-开始训练\" class=\"headerlink\" title=\"4.开始训练\"></a>4.开始训练</h3><p>同样，在终端里gaussian-splatting目录下，输入</p>\n<p>python train.py -s data -m data&#x2F;output (参数为输出地址)<br>python train.py -s data -m data&#x2F;images<br> 成功开始会出现如下图所示<br>然后耐心等待训练完成以后即可。</p>\n<h3 id=\"5-查看结果\"><a href=\"#5-查看结果\" class=\"headerlink\" title=\"5.查看结果\"></a>5.查看结果</h3><p>同样，在终端里gaussian-splatting目录下，输入</p>\n<p> .\\viewers\\bin\\SIBR_gaussianViewer_app -m data&#x2F;output</p>\n<p> 即可打开viewer窗口，可以把你的场景拖大，下面是一些快捷按键</p>\n<p>w             uio </p>\n<p>asd          jkl  </p>\n<p> 就是可以控制视角的变化，大家自己按一下就知道是干啥的了，这里就不一一列举对应的功能了（作者已经累了），注意切换输入法为英文输入。</p>\n<p>至此，就全部结束啦，完结撒花！</p>\n<p>1 . convert.py<br>将input数据集转换成为点云<br>通过sfm算法将输入的图片集转换成点云,这种方式的具体流程如下:</p>\n<ol>\n<li>特征提取：从输入的图像集中，对每一张图像提取特征点及其描述子，常用的特征提取算法有 SIFT、SURF、ORB 等。</li>\n<li>全局特征匹配：在所有图像的特征点之间进行匹配，找出不同图像中表示同一物理点的特征点对。由于是全局匹配，可能会处理大量的特征点对，计算量较大。</li>\n<li>相机位姿估计：根据匹配的特征点对，使用诸如对极几何、PnP 等算法来估计相机的相对位姿。</li>\n<li>三角测量：利用已知的相机位姿和匹配的特征点，通过三角测量计算出三维点的坐标，从而生成点云。</li>\n<li>全局优化：使用束调整（Bundle Adjustment）等方法对相机位姿和三维点的坐标进行全局优化，提高点云的精度。<br>SfM 侧重于对静态图像集进行全局处理，通过全局优化来生成高精度的点云,SfM相比ORB方法 更侧重于离线的高精度三维重建.</li>\n</ol>\n<p>渲染辐射场的几种方法建立了最近的数据集。革命性地合成了用多张照片或视频捕获的场景。然而，实<br>现高视觉质量仍然需要训练和渲染成本高昂的神经网络，而最近更快的方法不可避免地要牺牲速度来换<br>取质量。对于无界和完整的场景(而不是孤立的对象)和1080p分辨率的渲染，目前没有一种方法可以实现<br>实时显示速率。我们介绍了三个关键要素，使我们能够在保持有竞争力的训练时间的同时实现最先进的<br>视觉质量，并且重要的是允许在1080p分辨率下实现高质量的实时(≥30 fps)新视图合成。首先，从相机<br>校准过程中产生的稀疏点开始，我们用3D高斯分布表示场景，该分布保留了用于场景优化的连续体辐射<br>场的理想属性，同时避免了在空白空间中不必要的计算;其次，我们对3D高斯分布进行交错优化&#x2F;密度控<br>制，特别是优化各向异性协方差以实现场景的准确表示;第三，我们开发了一种支持各向异性喷溅的快速<br>可视性感知渲染算法，既加速了训练，又允许实时渲染。我们展示了最先进的视觉质量和实时性</p>\n<h2 id=\"3dgs流程\"><a href=\"#3dgs流程\" class=\"headerlink\" title=\"3dgs流程\"></a>3dgs流程</h2><p>3DGS流程：<br>（1）通过colmap等工具从多视角图像获取SfM点云（SfM是一种三维重建算法，通过两个或多个场景&#x2F;图片恢复相机位姿，并重建三维坐标点），对 SfM 点云进行了初始化。</p>\n<p>（2）点云中的每一个点代表着一个三维的高斯分布，除了点的位置（均值）外，还有协方差、不透明度、颜色（球谐函数）–3D 高斯球云。</p>\n<p>（3）将这些椭球体沿着特定角度投影到对应位姿所在平面（Splatting）。一个椭球体投影到平面会得到一个椭圆；然后通过计算待求解像素和椭圆中心的距离，我们得到不透明度（离的近，说明越不透明）；每个椭球又代表各自的颜色，进行alpha composting来合成颜色，然后快速的对所有像素做“可微光栅化”，渲染得到图像。</p>\n<p>（4）得到渲染图像Image后，再与gt图像比较，得到损失loss，并沿蓝色箭头反向传播，随机梯度下降；向下送入自适应密度控制中（增密或修剪），更新点云优化。</p>\n<h2 id=\"代码运行流程\"><a href=\"#代码运行流程\" class=\"headerlink\" title=\"代码运行流程\"></a>代码运行流程</h2><h3 id=\"1-Running\"><a href=\"#1-Running\" class=\"headerlink\" title=\"1.Running\"></a>1.Running</h3><p>python train.py -s <path to COLMAP or NeRF Synthetic dataset></p>\n<p>示例：</p>\n<p>python train.py -s data&#x2F;360_extra_scenes&#x2F;treehill</p>\n<p>运行完在output下得到相应的文件夹output&#x2F;treehill，</p>\n<p>将得到的结果路径添加至SIBR_viewer.py（model_path &#x3D; r’D:\\gaussian-splatting\\output\\treehill’），运行即可获得可视化。</p>\n<p>densify_and_prune操作会改变高斯数量。结合在一起，允许模型根据当前两个的训练状态动态地调整高斯的数量，从而实现更好的表示能力和计算效率。因此，在这个过程中，高斯的数量会变化，所以需要在执行后打印出当前的高斯数量。在训练的时候添加高斯数量打印：</p>\n<p>print(f”Iteration {iteration}: Number of Gaussians after densification and pruning: {gaussians.get_xyz.shape[0]}”)</p>\n<h3 id=\"2-Evaluation\"><a href=\"#2-Evaluation\" class=\"headerlink\" title=\"2. Evaluation\"></a>2. Evaluation</h3><p>python train.py -s <path to COLMAP or NeRF Synthetic dataset> –eval # Train with train&#x2F;test split<br>python render.py -m <path to trained model> # Generate renderings<br>python metrics.py -m <path to trained model> # Compute error metrics on renderings</p>\n<p>训练模型-&gt;渲染图像-&gt;计算指标</p>\n<p>示例：Evaluation运行，输入命令行(python train.py -s  + 数据集的路径)</p>\n<p>python train.py -s data&#x2F;360_extra_scenes&#x2F;treehill –eval<br>python render.py -m output&#x2F;treehill<br>python metrics.py -m output&#x2F;treehill</p>\n<h3 id=\"2-Processing-your-own-Scenes\"><a href=\"#2-Processing-your-own-Scenes\" class=\"headerlink\" title=\"2. Processing your own Scenes\"></a>2. Processing your own Scenes</h3><p>按照README.me进行，选择的mill19&#x2F;building-pixsfm进行简单测试</p>\n<p>图像目录结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;location&gt;</span><br><span class=\"line\">|---input</span><br><span class=\"line\">    |---&lt;image 0&gt;</span><br><span class=\"line\">    |---&lt;image 1&gt;</span><br><span class=\"line\">    |---...</span><br><span class=\"line\"></span><br><span class=\"line\">python convert.py -s &lt;location&gt; [--resize]     #If not resizing, ImageMagick is not needed</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\">&lt;data/mill19/building-pixsfm&gt;</span><br><span class=\"line\">|---input</span><br><span class=\"line\">    |---&lt;image 0&gt;</span><br><span class=\"line\">    |---&lt;image 1&gt;</span><br><span class=\"line\">    |---...</span><br></pre></td></tr></table></figure>\n<p>然后运行： python convert.py -s data&#x2F;mill19&#x2F;building-pixsfm</p>\n<h2 id=\"两句代码优化3DGS显存问题\"><a href=\"#两句代码优化3DGS显存问题\" class=\"headerlink\" title=\"两句代码优化3DGS显存问题\"></a>两句代码优化3DGS显存问题</h2><p>做实验的时候发现，对于同一个场景，图片越多显存占用越大。但是训练的时候是一张图片做一次梯度下降，说明batch_size一直是1。那数据集变大，batch_size不变的情况下，显存占用却变大了，这明显很不合理。当训练的图片比较多的时候，显存就不够了。</p>\n<p>图片越多，显存占用越大，这就暗示了3DGS源码里一定是训练前预先将所有的图片都加载显存中的。事实也确实如此，在训练前的预处理中，为每张图片都构造了一个对应的Camera对象，Camera的初始化函数中就将图片加载到了显存中，如下。</p>\n<h3 id=\"源码scene-cameras-py中39行，修改前\"><a href=\"#源码scene-cameras-py中39行，修改前\" class=\"headerlink\" title=\"源码scene&#x2F;cameras.py中39行，修改前\"></a>源码scene&#x2F;cameras.py中39行，修改前</h3><p>self.original_image &#x3D; image.clamp(0.0, 1.0).to(self.data_device)</p>\n<h3 id=\"修改后\"><a href=\"#修改后\" class=\"headerlink\" title=\"修改后\"></a>修改后</h3><p>self.original_image &#x3D; image.clamp(0.0, 1.0)<br>这优化很简单，不要提前载入显存就好了，直接把“.to(self.data_device)”删掉。训练的时候，具体训练哪张图片，载入哪张图片就好了。这个在3DGS源码中，已经做了，如下。经过所述的代码修改后，确实显存减少了，但是训练速度变慢了。因为相比修改前，多出来的耗时在每次训练迭代中都有一次图片加载到显存中的操作。在cuda中将数据从内存载入显存是可以异步进行的，pytorch也提供了接口，所以对代码做出以下修改。</p>\n<h3 id=\"源码train-py中90行，修改前\"><a href=\"#源码train-py中90行，修改前\" class=\"headerlink\" title=\"源码train.py中90行，修改前\"></a>源码train.py中90行，修改前</h3><p>gt_image &#x3D; viewpoint_cam.original_image.cuda()</p>\n<h3 id=\"修改后，需移动到render-pkg-render-…-之前\"><a href=\"#修改后，需移动到render-pkg-render-…-之前\" class=\"headerlink\" title=\"修改后，需移动到render_pkg &#x3D; render(…)之前\"></a>修改后，需移动到render_pkg &#x3D; render(…)之前</h3><p>gt_image &#x3D; viewpoint_cam.original_image.cuda(non_blocking&#x3D;True)<br>不过仅仅只是将载入方式设置为non_blocking还不够，因为可能在要使用gt_image之前其还没有完成载入显存的操作，此时也会发生阻塞。所以需要将这句代码往前放，可以放到“render_pkg &#x3D; render(viewpoint_cam, gaussians, pipe, bg)”这句之前。这样就几乎不会影响训练速度。</p>\n"},{"title":"2025.6.11学习日记","path":"2025/06/11/学习日记25年6月/2025.6.11学习笔记/","excerpt":"","date":"2025-06-10T16:00:00.000Z","tags":["3DGS","日记"],"content":"<h2 id=\"今日学习内容\"><a href=\"#今日学习内容\" class=\"headerlink\" title=\"今日学习内容\"></a>今日学习内容</h2><h3 id=\"3DGS\"><a href=\"#3DGS\" class=\"headerlink\" title=\"3DGS:\"></a>3DGS:</h3><h4 id=\"今日工作总结\"><a href=\"#今日工作总结\" class=\"headerlink\" title=\"今日工作总结:\"></a>今日工作总结:</h4><h5 id=\"​一-代码运行与结构梳理​​\"><a href=\"#​一-代码运行与结构梳理​​\" class=\"headerlink\" title=\"​一. 代码运行与结构梳理​​:\"></a>​一. 代码运行与结构梳理​​:</h5><p>学习了原版3DGS的项目结构和训练流程:</p>\n<ol>\n<li>train.py : 训练脚本,主要负责对高斯球参数进行训练.</li>\n<li>render.py : 渲染脚本,用于将训练得到的高斯球参数渲染成图像.</li>\n<li>metrics.py : 评估脚本,对比真值图像和渲染图像,用于评估渲染结果的质量.</li>\n</ol>\n<h5 id=\"二-训练结果\"><a href=\"#二-训练结果\" class=\"headerlink\" title=\"二.训练结果:\"></a>二.训练结果:</h5><p>火车数据集301张图像.</p>\n<ol>\n<li>train.py :<br><strong>ITER 7000:</strong><br>L1损失 : 0.06603520661592484<br>PSNR :20.096060180664065<br>训练时间 : 13分30秒<br><strong>ITER 30000:</strong><br>L1损失 : 0.038734884932637215<br>PSNR : 24.450721740722656s<br>训练时间:77分25秒</li>\n<li>render.py : </li>\n<li>metrics.py :<br>SSIM: 0.87444342<br>PSNR: 25.8431702<br>LPIPS: 0.1703709</li>\n</ol>\n<p>​​明日工作计划:​​<br>今天对火车的数据集进行了实验,明天准备开始对其他数据集进行实验,得出一组原版3DGS的训练结果作为参考,方便对后续3DGS改进算法进行实验对比.</p>\n<h3 id=\"下午回学校开会来着\"><a href=\"#下午回学校开会来着\" class=\"headerlink\" title=\"下午回学校开会来着\"></a>下午回学校开会来着</h3><h3 id=\"晚上继续做力扣二叉树篇\"><a href=\"#晚上继续做力扣二叉树篇\" class=\"headerlink\" title=\"晚上继续做力扣二叉树篇\"></a>晚上继续做力扣二叉树篇</h3><h2 id=\"明日计划\"><a href=\"#明日计划\" class=\"headerlink\" title=\"明日计划\"></a>明日计划</h2><h3 id=\"3dgs\"><a href=\"#3dgs\" class=\"headerlink\" title=\"3dgs\"></a>3dgs</h3><p>明天尽量让时间一直在跑代码,然后我可以学java.</p>\n<h3 id=\"mysql学习\"><a href=\"#mysql学习\" class=\"headerlink\" title=\"mysql学习\"></a>mysql学习</h3><h3 id=\"力扣\"><a href=\"#力扣\" class=\"headerlink\" title=\"力扣\"></a>力扣</h3><h3 id=\"项目文档\"><a href=\"#项目文档\" class=\"headerlink\" title=\"项目文档\"></a>项目文档</h3><h2 id=\"生活记录\"><a href=\"#生活记录\" class=\"headerlink\" title=\"生活记录\"></a>生活记录</h2><h3 id=\"1-早上足球训练\"><a href=\"#1-早上足球训练\" class=\"headerlink\" title=\"1. 早上足球训练\"></a>1. 早上足球训练</h3><p>早上7点,颠球短传训练.</p>\n"},{"title":"nvm更改node版本","path":"2025/06/11/杂项笔记/nvm更改node版本/","excerpt":"","date":"2025-06-10T16:00:00.000Z","tags":["nvm","node"],"content":"<h2 id=\"安装brew\"><a href=\"#安装brew\" class=\"headerlink\" title=\"安装brew\"></a>安装brew</h2><p>首先安装 Brew。这个就不详细说了 没有的话自己去搜一下</p>\n<h2 id=\"第一步：进行nvm-安装操作\"><a href=\"#第一步：进行nvm-安装操作\" class=\"headerlink\" title=\"第一步：进行nvm 安装操作\"></a>第一步：进行nvm 安装操作</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install nvm</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"执行后：\"><a href=\"#执行后：\" class=\"headerlink\" title=\"执行后：\"></a>执行后：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==&gt; Pouring nvm-0.39.1_1.all.bottle.tar.gz</span><br><span class=\"line\">==&gt; Caveats</span><br><span class=\"line\">Please note that upstream has asked us to make explicit managing</span><br><span class=\"line\">nvm via Homebrew is unsupported by them and you should check any</span><br><span class=\"line\">problems against the standard nvm install method prior to reporting.</span><br><span class=\"line\"></span><br><span class=\"line\">You should create NVM&#x27;s working directory if it doesn&#x27;t exist:</span><br><span class=\"line\">  // 这里就是提示你创建一个 nvm文件</span><br><span class=\"line\">  mkdir ~/.nvm</span><br><span class=\"line\"></span><br><span class=\"line\">Add the following to ~/.zshrc or your desired shell</span><br><span class=\"line\">configuration file:</span><br><span class=\"line\">   // 这里就是想让你进行一些配置</span><br><span class=\"line\">  export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br><span class=\"line\">  [ -s &quot;/opt/homebrew/opt/nvm/nvm.sh&quot; ] &amp;&amp; \\. &quot;/opt/homebrew/opt/nvm/nvm.sh&quot;  # This loads nvm</span><br><span class=\"line\">  [ -s &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot; ] &amp;&amp; \\. &quot;/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm&quot;  # This loads nvm bash_completion</span><br><span class=\"line\"></span><br><span class=\"line\">You can set $NVM_DIR to any location, but leaving it unchanged from</span><br><span class=\"line\">/opt/homebrew/opt/nvm will destroy any nvm-installed Node installations</span><br><span class=\"line\">upon upgrade/reinstall.</span><br><span class=\"line\"></span><br><span class=\"line\">Type `nvm help` for further information.</span><br><span class=\"line\">==&gt; Summary</span><br><span class=\"line\">🍺  /opt/homebrew/Cellar/nvm/0.39.1_1: 9 files, 184KB</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"执行-nvm-–version\"><a href=\"#执行-nvm-–version\" class=\"headerlink\" title=\"执行 nvm –version\"></a>执行 nvm –version</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm --version</span><br><span class=\"line\"></span><br><span class=\"line\"> //出现问题。去进行配置</span><br><span class=\"line\"> zsh: command not found: nvm</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"第二步：nvm配置\"><a href=\"#第二步：nvm配置\" class=\"headerlink\" title=\"第二步：nvm配置\"></a>第二步：nvm配置</h2><h3 id=\"1-vim-bash-profile\"><a href=\"#1-vim-bash-profile\" class=\"headerlink\" title=\"1.vim ~/.bash_profile\"></a>1.<code>vim ~/.bash_profile</code></h3><p>点击 i 进行插入操作 插入下面配置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NVM_DIR=~/.nvm</span><br><span class=\"line\">source $(brew --prefix nvm)/nvm.sh</span><br></pre></td></tr></table></figure>\n\n<p>插入完成后 点击Esc 然后 使用 :wq. 保存并退出</p>\n<p>执行：<code>source ~/.bash_profile</code> 如果出问题先不管接着往下走</p>\n<h3 id=\"2-vim-zshrc\"><a href=\"#2-vim-zshrc\" class=\"headerlink\" title=\"2.vim ~/.zshrc\"></a>2.<code>vim ~/.zshrc</code></h3><p>点击 i 进行插入操作 插入下面配置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NVM_DIR=~/.nvm</span><br><span class=\"line\">source $(brew --prefix nvm)/nvm.sh</span><br></pre></td></tr></table></figure>\n\n<p>插入完成后 点击Esc 然后 使用 :wq. 保存并退出 执行：<code>source ~/.zshrc</code></p>\n<h3 id=\"3-vim-profile\"><a href=\"#3-vim-profile\" class=\"headerlink\" title=\"3.vim ~/.profile\"></a>3.<code>vim ~/.profile</code></h3><p>点击 i 进行插入操作 插入下面配置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NVM_DIR=~/.nvm</span><br><span class=\"line\">source $(brew --prefix nvm)/nvm.sh</span><br></pre></td></tr></table></figure>\n\n<p>插入完成后 点击Esc 然后 使用 :wq. 保存并退出 执行：<code>source ~/.profile</code></p>\n<h2 id=\"最后开始进行测试\"><a href=\"#最后开始进行测试\" class=\"headerlink\" title=\"最后开始进行测试\"></a>最后开始进行测试</h2><p>执行：<code>nvm --version</code> 显示版本号就说明配置成功：<code>0.39.1</code></p>\n<p>通过nvm 进行node 版本控制 版本号根据自己的需求定义</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install 12.6.0</span><br></pre></td></tr></table></figure>\n\n<p>查看版本：<code>node -v</code></p>\n<h2 id=\"nvm-常用命令：\"><a href=\"#nvm-常用命令：\" class=\"headerlink\" title=\"nvm 常用命令：\"></a>nvm 常用命令：</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">以下用8.9.2版本为例</span><br><span class=\"line\"></span><br><span class=\"line\">nvm ls ：打印出所有的版本 install stable：安装最稳定的版本</span><br><span class=\"line\">nvm install v8.9.2 ： 安装node的8.9.2的版本（删除用uninstall）</span><br><span class=\"line\">nvm current ：当前使用的node版本</span><br><span class=\"line\">nvm use v8.9.2 ：将node改为8.9.2版本</span><br><span class=\"line\">nvm alias default 0.12.7：设置默认 node 版本为 0.12.7</span><br><span class=\"line\">nvm alias default ：设置系统默认的node版本</span><br><span class=\"line\">nvm alias  ：给不同的版本号添加别名</span><br><span class=\"line\">nvm unalias  ： 删除已定义的别名</span><br><span class=\"line\">nvm reinstall-packages ：在当前版本node环境下，重新全局安装指定版本号的npm包</span><br><span class=\"line\">npm install -g mz-fis：安装 mz-fis 模块至全局目录，安装的路径：/Users/&lt;你的用户名&gt;/.nvm/versions/node/v0.12.7/lib/mz-fis</span><br><span class=\"line\">nvm use 4：切换至 4.2.2 版本（支持模糊查询）</span><br><span class=\"line\">npm install -g react-native-cli：安装 react-native-cli 模块至全局目录，安装的路径：/Users/&lt;你的用户名&gt;/.nvm/versions/node/v4.2.2/lib/react-native-cli</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"node-npm-版本对照\"><a href=\"#node-npm-版本对照\" class=\"headerlink\" title=\"node npm 版本对照\"></a>node npm 版本对照</h3><p>链接: <a href=\"https://link.juejin.cn/?target=https://nodejs.org/zh-cn/download/releases/\">版本对照</a><img src=\"https://cdn.nlark.com/yuque/0/2025/webp/55928496/1749104702751-1375c7cf-3b7d-4104-a714-1bef636eb5bc.webp\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/JakicDong/blog-assets@main/images/20250611093216.png\" alt=\"20250611093216\"></p>\n<h2 id=\"末尾-npm-降级\"><a href=\"#末尾-npm-降级\" class=\"headerlink\" title=\"末尾 npm 降级\"></a>末尾 npm 降级</h2><p>执行：<code>sudo npm install npm@6.9.0 -g</code></p>\n<p>问题是不可控的 如果未能解决你的问题 就祝你顺利</p>\n"}]}